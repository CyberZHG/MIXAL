const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/__vite-browser-external-BLYCKd8t.js","assets/__vite-browser-external-C92OJ4cJ.css"])))=>i.map(i=>d[i]);
import"./__vite-browser-external-BLYCKd8t.js";const Ki="modulepreload",Qi=function(r){return"/MIXAL/"+r},fn={},eo=function(n,u,s){let c=Promise.resolve();if(u&&u.length>0){let F=function(v){return Promise.all(v.map(A=>Promise.resolve(A).then($=>({status:"fulfilled",value:$}),$=>({status:"rejected",reason:$}))))};document.getElementsByTagName("link");const g=document.querySelector("meta[property=csp-nonce]"),m=g?.nonce||g?.getAttribute("nonce");c=F(u.map(v=>{if(v=Qi(v),v in fn)return;fn[v]=!0;const A=v.endsWith(".css"),$=A?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${$}`))return;const L=document.createElement("link");if(L.rel=A?"stylesheet":Ki,A||(L.as="script"),L.crossOrigin="",L.href=v,m&&L.setAttribute("nonce",m),document.head.appendChild(L),A)return new Promise((N,se)=>{L.addEventListener("load",N),L.addEventListener("error",()=>se(new Error(`Unable to preload CSS for ${v}`)))})}))}function p(g){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=g,window.dispatchEvent(m),!m.defaultPrevented)throw g}return c.then(g=>{for(const m of g||[])m.status==="rejected"&&p(m.reason);return n().catch(p)})};async function to(r={}){var n;(function(){function e(y){y=y.split("-")[0];for(var C=y.split(".").slice(0,3);C.length<3;)C.push("00");return C=C.map((_,B,S)=>_.padStart(2,"0")),C.join("")}var t=y=>[y/1e4|0,(y/100|0)%100,y%100].join("."),i=2147483647,o=typeof process<"u"&&process.versions?.node?e(process.versions.node):i;if(o<16e4)throw new Error(`This emscripten-generated code requires node v${t(16e4)} (detected v${t(o)})`);var a=typeof navigator<"u"&&navigator.userAgent;if(a){var l=a.includes("Safari/")&&!a.includes("Chrome/")&&a.match(/Version\/(\d+\.?\d*\.?\d*)/)?e(a.match(/Version\/(\d+\.?\d*\.?\d*)/)[1]):i;if(l<15e4)throw new Error(`This emscripten-generated code requires Safari v${t(15e4)} (detected v${l})`);var d=a.match(/Firefox\/(\d+(?:\.\d+)?)/)?parseFloat(a.match(/Firefox\/(\d+(?:\.\d+)?)/)[1]):i;if(d<79)throw new Error(`This emscripten-generated code requires Firefox v79 (detected v${d})`);var D=a.match(/Chrome\/(\d+(?:\.\d+)?)/)?parseFloat(a.match(/Chrome\/(\d+(?:\.\d+)?)/)[1]):i;if(D<85)throw new Error(`This emscripten-generated code requires Chrome v85 (detected v${D})`)}})();var u=r,s=!!globalThis.window,c=!!globalThis.WorkerGlobalScope,p=globalThis.process?.versions?.node&&globalThis.process?.type!="renderer",g=!s&&!p&&!c;if(p){const{createRequire:e}=await eo(async()=>{const{createRequire:t}=await import("./__vite-browser-external-BLYCKd8t.js");return{createRequire:t}},__vite__mapDeps([0,1]));var m=e(import.meta.url)}var F="./this.program",v=import.meta.url,A="";function $(e){return u.locateFile?u.locateFile(e,A):A+e}var L,N;if(p){if(!(globalThis.process?.versions?.node&&globalThis.process?.type!="renderer"))throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");var se=m("node:fs");v.startsWith("file:")&&(A=m("node:path").dirname(m("node:url").fileURLToPath(v))+"/"),N=t=>{t=W(t)?new URL(t):t;var i=se.readFileSync(t);return b(Buffer.isBuffer(i)),i},L=async(t,i=!0)=>{t=W(t)?new URL(t):t;var o=se.readFileSync(t,i?void 0:"utf8");return b(i?Buffer.isBuffer(o):typeof o=="string"),o},process.argv.length>1&&(F=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2)}else if(!g)if(s||c){try{A=new URL(".",v).href}catch{}if(!(globalThis.window||globalThis.WorkerGlobalScope))throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");c&&(N=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),L=async e=>{if(W(e))return new Promise((i,o)=>{var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="arraybuffer",a.onload=()=>{if(a.status==200||a.status==0&&a.response){i(a.response);return}o(a.status)},a.onerror=o,a.send(null)});var t=await fetch(e,{credentials:"same-origin"});if(t.ok)return t.arrayBuffer();throw new Error(t.status+" : "+t.url)}}else throw new Error("environment detection error");var x=console.log.bind(console),T=console.error.bind(console);b(!g,"shell environment detected but not enabled at build time.  Add `shell` to `-sENVIRONMENT` to enable.");var w;globalThis.WebAssembly||T("no native wasm support detected");var ee=!1;function b(e,t){e||le("Assertion failed"+(t?": "+t:""))}var W=e=>e.startsWith("file://");function oe(){var e=Qt();b((e&3)==0),e==0&&(e+=4),j[e>>2]=34821223,j[e+4>>2]=2310721022,j[0]=1668509029}function ve(){if(!ee){var e=Qt();e==0&&(e+=4);var t=j[e>>2],i=j[e+4>>2];(t!=34821223||i!=2310721022)&&le(`Stack overflow! Stack cookie has been overwritten at ${Je(e)}, expected hex dwords 0x89BACDFE and 0x2135467, but received ${Je(i)} ${Je(t)}`),j[0]!=1668509029&&le("Runtime error: The application has corrupted its heap memory area (address zero)!")}}class R extends Error{}class ze extends R{constructor(t){super(t),this.excPtr=t;const i=Xr(t);this.name=i[0],this.message=i[1]}}(()=>{var e=new Int16Array(1),t=new Int8Array(e.buffer);e[0]=25459,(t[0]!==115||t[1]!==99)&&le("Runtime error: expected the system to be little-endian! (Run with -sSUPPORT_BIG_ENDIAN to bypass)")})();function Ie(e){Object.getOwnPropertyDescriptor(u,e)||Object.defineProperty(u,e,{configurable:!0,set(){le(`Attempt to set \`Module.${e}\` after it has already been processed.  This can happen, for example, when code is injected via '--post-js' rather than '--pre-js'`)}})}function f(e){return()=>b(!1,`call to '${e}' via reference taken before Wasm module initialization`)}function E(e){Object.getOwnPropertyDescriptor(u,e)&&le(`\`Module.${e}\` was supplied but \`${e}\` not included in INCOMING_MODULE_JS_API`)}function P(e){return e==="FS_createPath"||e==="FS_createDataFile"||e==="FS_createPreloadedFile"||e==="FS_preloadFile"||e==="FS_unlink"||e==="addRunDependency"||e==="FS_createLazyFile"||e==="FS_createDevice"||e==="removeRunDependency"}function q(e){G(e)}function G(e){Object.getOwnPropertyDescriptor(u,e)||Object.defineProperty(u,e,{configurable:!0,get(){var t=`'${e}' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the Emscripten FAQ)`;P(e)&&(t+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you"),le(t)}})}var M,Me,De,ge,te,pe,Ge,j,Cr,Ar,_r,xr,ht=!1;function Un(){var e=on.buffer;De=new Int8Array(e),te=new Int16Array(e),ge=new Uint8Array(e),pe=new Uint16Array(e),Ge=new Int32Array(e),j=new Uint32Array(e),Cr=new Float32Array(e),Ar=new Float64Array(e),_r=new BigInt64Array(e),xr=new BigUint64Array(e)}b(globalThis.Int32Array&&globalThis.Float64Array&&Int32Array.prototype.subarray&&Int32Array.prototype.set,"JS engine does not provide full typed array support");function Wn(){if(u.preRun)for(typeof u.preRun=="function"&&(u.preRun=[u.preRun]);u.preRun.length;)Kn(u.preRun.shift());Ie("preRun"),Br(Sr)}function Vn(){b(!ht),ht=!0,ve(),Qe.__wasm_call_ctors()}function jn(){if(ve(),u.postRun)for(typeof u.postRun=="function"&&(u.postRun=[u.postRun]);u.postRun.length;)Zn(u.postRun.shift());Ie("postRun"),Br(wr)}function le(e){u.onAbort?.(e),e="Aborted("+e+")",T(e),ee=!0;var t=new WebAssembly.RuntimeError(e);throw Me?.(t),t}var Ee={error(){le("Filesystem support (FS) was not included. The problem is that you are using files from JS, but files were not used from C/C++, so filesystem support was not auto-included. You can force-include filesystem support with -sFORCE_FILESYSTEM")},init(){Ee.error()},createDataFile(){Ee.error()},createPreloadedFile(){Ee.error()},createLazyFile(){Ee.error()},open(){Ee.error()},mkdev(){Ee.error()},registerDevice(){Ee.error()},analyzePath(){Ee.error()},ErrnoError(){Ee.error()}};function Ae(e,t){return(...i)=>{b(ht,`native function \`${e}\` called before runtime initialization`);var o=Qe[e];return b(o,`exported native function \`${e}\` not found`),b(i.length<=t,`native function \`${e}\` called with ${i.length} args but expects ${t}`),o(...i)}}var Nt;function Hn(){return u.locateFile?$("MixalWASM.wasm"):new URL("/MIXAL/assets/MixalWASM-5g-OaRnw.wasm",import.meta.url).href}function qn(e){if(e==Nt&&w)return new Uint8Array(w);if(N)return N(e);throw"both async and sync fetching of the wasm failed"}async function zn(e){if(!w)try{var t=await L(e);return new Uint8Array(t)}catch{}return qn(e)}async function Gn(e,t){try{var i=await zn(e),o=await WebAssembly.instantiate(i,t);return o}catch(a){T(`failed to asynchronously prepare wasm: ${a}`),W(e)&&T(`warning: Loading from a file URI (${e}) is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing`),le(a)}}async function Jn(e,t,i){if(!e&&!W(t)&&!p)try{var o=fetch(t,{credentials:"same-origin"}),a=await WebAssembly.instantiateStreaming(o,i);return a}catch(l){T(`wasm streaming compile failed: ${l}`),T("falling back to ArrayBuffer instantiation")}return Gn(t,i)}function Xn(){var e={env:sn,wasi_snapshot_preview1:sn};return e}async function Yn(){function e(d,D){return Qe=d.exports,Ai(Qe),Un(),Qe}var t=u;function i(d){return b(u===t,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),t=null,e(d.instance)}var o=Xn();if(u.instantiateWasm)return new Promise((d,D)=>{try{u.instantiateWasm(o,(y,C)=>{d(e(y,C))})}catch(y){T(`Module.instantiateWasm callback failed with error: ${y}`),D(y)}});Nt??=Hn();var a=await Jn(w,Nt,o),l=i(a);return l}var Br=e=>{for(;e.length>0;)e.shift()(u)},wr=[],Zn=e=>wr.push(e),Sr=[],Kn=e=>Sr.push(e),Je=e=>(b(typeof e=="number",`ptrToString expects a number, got ${typeof e}`),e>>>=0,"0x"+e.toString(16).padStart(8,"0")),X=e=>Qr(e),Y=()=>tn(),it=e=>{it.shown||={},it.shown[e]||(it.shown[e]=1,p&&(e="warning: "+e),T(e))},Tr=globalThis.TextDecoder&&new TextDecoder,$r=(e,t,i,o)=>{var a=t+i;if(o)return a;for(;e[t]&&!(t>=a);)++t;return t},kr=(e,t=0,i,o)=>{var a=$r(e,t,i,o);if(a-t>16&&e.buffer&&Tr)return Tr.decode(e.subarray(t,a));for(var l="";t<a;){var d=e[t++];if(!(d&128)){l+=String.fromCharCode(d);continue}var D=e[t++]&63;if((d&224)==192){l+=String.fromCharCode((d&31)<<6|D);continue}var y=e[t++]&63;if((d&240)==224?d=(d&15)<<12|D<<6|y:((d&248)!=240&&it("Invalid UTF-8 leading byte "+Je(d)+" encountered when deserializing a UTF-8 string in wasm memory to a JS string!"),d=(d&7)<<18|D<<12|y<<6|e[t++]&63),d<65536)l+=String.fromCharCode(d);else{var C=d-65536;l+=String.fromCharCode(55296|C>>10,56320|C&1023)}}return l},Xe=(e,t,i)=>(b(typeof e=="number",`UTF8ToString expects a number (got ${typeof e})`),e?kr(ge,e,t,i):""),Qn=(e,t,i,o)=>le(`Assertion failed: ${Xe(e)}, at: `+[t?Xe(t):"unknown filename",i,o?Xe(o):"unknown function"]),ot=[],vt=0,eu=e=>{var t=new Ut(e);return t.get_caught()||(t.set_caught(!0),vt--),t.set_rethrown(!1),ot.push(t),un(e)},we=0,tu=()=>{J(0,0),b(ot.length>0);var e=ot.pop();er(e.excPtr),we=0};class Ut{constructor(t){this.excPtr=t,this.ptr=t-24}set_type(t){j[this.ptr+4>>2]=t}get_type(){return j[this.ptr+4>>2]}set_destructor(t){j[this.ptr+8>>2]=t}get_destructor(){return j[this.ptr+8>>2]}set_caught(t){t=t?1:0,De[this.ptr+12]=t}get_caught(){return De[this.ptr+12]!=0}set_rethrown(t){t=t?1:0,De[this.ptr+13]=t}get_rethrown(){return De[this.ptr+13]!=0}init(t,i){this.set_adjusted_ptr(0),this.set_type(t),this.set_destructor(i)}set_adjusted_ptr(t){j[this.ptr+16>>2]=t}get_adjusted_ptr(){return j[this.ptr+16>>2]}}var Ft=e=>Zr(e),Ir=e=>{var t=we?.excPtr;if(!t)return Ft(0),0;var i=new Ut(t);i.set_adjusted_ptr(t);var o=i.get_type();if(!o)return Ft(0),t;for(var a of e){if(a===0||a===o)break;var l=i.ptr+16;if(nn(a,o,l))return Ft(a),t}return Ft(o),t},ru=()=>Ir([]),nu=e=>Ir([e]),uu=()=>{var e=ot.pop();e||le("no exception to throw");var t=e.excPtr;throw e.get_rethrown()||(ot.push(e),e.set_rethrown(!0),e.set_caught(!1),vt++),Tt(t),we=new ze(t),we},iu=(e,t,i)=>{var o=new Ut(e);throw o.init(t,i),Tt(e),we=new ze(e),vt++,we},ou=()=>vt,su=e=>{throw we||(we=new ze(e)),we},au=()=>le("native code called abort()"),bt={},Wt=e=>{for(;e.length;){var t=e.pop(),i=e.pop();i(t)}};function st(e){return this.fromWireType(j[e>>2])}var Ye={},Ne={},Et={},cu=class extends Error{constructor(t){super(t),this.name="InternalError"}},Ct=e=>{throw new cu(e)},_e=(e,t,i)=>{e.forEach(D=>Et[D]=t);function o(D){var y=i(D);y.length!==e.length&&Ct("Mismatched type converter count");for(var C=0;C<e.length;++C)ye(e[C],y[C])}var a=new Array(t.length),l=[],d=0;for(let[D,y]of t.entries())Ne.hasOwnProperty(y)?a[D]=Ne[y]:(l.push(y),Ye.hasOwnProperty(y)||(Ye[y]=[]),Ye[y].push(()=>{a[D]=Ne[y],++d,d===l.length&&o(a)}));l.length===0&&o(a)},lu=e=>{var t=bt[e];delete bt[e];var i=t.rawConstructor,o=t.rawDestructor,a=t.fields,l=a.map(d=>d.getterReturnType).concat(a.map(d=>d.setterArgumentType));_e([e],l,d=>{var D={};for(var[y,C]of a.entries()){const _=d[y],B=C.getter,S=C.getterContext,I=d[y+a.length],H=C.setter,z=C.setterContext;D[C.fieldName]={read:re=>_.fromWireType(B(S,re)),write:(re,ne)=>{var Be=[];H(z,re,I.toWireType(Be,ne)),Wt(Be)},optional:_.optional}}return[{name:t.name,fromWireType:_=>{var B={};for(var S in D)B[S]=D[S].read(_);return o(_),B},toWireType:(_,B)=>{for(var S in D)if(!(S in B)&&!D[S].optional)throw new TypeError(`Missing field: "${S}"`);var I=i();for(S in D)D[S].write(I,B[S]);return _!==null&&_.push(o,I),I},readValueFromPointer:st,destructorFunction:o}]})},ae=e=>{for(var t="";;){var i=ge[e++];if(!i)return t;t+=String.fromCharCode(i)}},at=class extends Error{constructor(t){super(t),this.name="BindingError"}},V=e=>{throw new at(e)};function du(e,t,i={}){var o=t.name;if(e||V(`type "${o}" must have a positive integer typeid pointer`),Ne.hasOwnProperty(e)){if(i.ignoreDuplicateRegistrations)return;V(`Cannot register type '${o}' twice`)}if(Ne[e]=t,delete Et[e],Ye.hasOwnProperty(e)){var a=Ye[e];delete Ye[e],a.forEach(l=>l())}}function ye(e,t,i={}){return du(e,t,i)}var Pr=(e,t,i)=>{switch(t){case 1:return i?o=>De[o]:o=>ge[o];case 2:return i?o=>te[o>>1]:o=>pe[o>>1];case 4:return i?o=>Ge[o>>2]:o=>j[o>>2];case 8:return i?o=>_r[o>>3]:o=>xr[o>>3];default:throw new TypeError(`invalid integer width (${t}): ${e}`)}},Ue=e=>{if(e===null)return"null";var t=typeof e;return t==="object"||t==="array"||t==="function"?e.toString():""+e},Or=(e,t,i,o)=>{if(t<i||t>o)throw new TypeError(`Passing a number "${Ue(t)}" from JS side to C/C++ side to an argument of type "${e}", which is outside the valid range [${i}, ${o}]!`)},fu=(e,t,i,o,a)=>{t=ae(t);const l=o===0n;let d=D=>D;if(l){const D=i*8;d=y=>BigInt.asUintN(D,y),a=d(a)}ye(e,{name:t,fromWireType:d,toWireType:(D,y)=>{if(typeof y=="number")y=BigInt(y);else if(typeof y!="bigint")throw new TypeError(`Cannot convert "${Ue(y)}" to ${this.name}`);return Or(t,y,o,a),y},readValueFromPointer:Pr(t,i,!l),destructorFunction:null})},pu=(e,t,i,o)=>{t=ae(t),ye(e,{name:t,fromWireType:function(a){return!!a},toWireType:function(a,l){return l?i:o},readValueFromPointer:function(a){return this.fromWireType(ge[a])},destructorFunction:null})},Du=e=>({count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}),Vt=e=>{function t(i){return i.$$.ptrType.registeredClass.name}V(t(e)+" instance already deleted")},jt=!1,Lr=e=>{},gu=e=>{e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)},Rr=e=>{e.count.value-=1;var t=e.count.value===0;t&&gu(e)},Mr=(e,t,i)=>{if(t===i)return e;if(i.baseClass===void 0)return null;var o=Mr(e,t,i.baseClass);return o===null?null:i.downcast(o)},Nr={},yu={},mu=(e,t)=>{for(t===void 0&&V("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t},hu=(e,t)=>(t=mu(e,t),yu[t]),At=(e,t)=>{(!t.ptrType||!t.ptr)&&Ct("makeClassHandle requires ptr and ptrType");var i=!!t.smartPtrType,o=!!t.smartPtr;return i!==o&&Ct("Both smartPtrType and smartPtr must be specified"),t.count={value:1},ct(Object.create(e,{$$:{value:t,writable:!0}}))};function Ur(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var i=hu(this.registeredClass,t);if(i!==void 0){if(i.$$.count.value===0)return i.$$.ptr=t,i.$$.smartPtr=e,i.clone();var o=i.clone();return this.destructor(e),o}function a(){return this.isSmartPointer?At(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):At(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var l=this.registeredClass.getActualType(t),d=Nr[l];if(!d)return a.call(this);var D;this.isConst?D=d.constPointerType:D=d.pointerType;var y=Mr(t,this.registeredClass,D.registeredClass);return y===null?a.call(this):this.isSmartPointer?At(D.registeredClass.instancePrototype,{ptrType:D,ptr:y,smartPtrType:this,smartPtr:e}):At(D.registeredClass.instancePrototype,{ptrType:D,ptr:y})}var ct=e=>globalThis.FinalizationRegistry?(jt=new FinalizationRegistry(t=>{console.warn(t.leakWarning),Rr(t.$$)}),ct=t=>{var i=t.$$,o=!!i.smartPtr;if(o){var a={$$:i},l=i.ptrType.registeredClass,d=new Error(`Embind found a leaked C++ instance ${l.name} <${Je(i.ptr)}>.
We'll free it automatically in this case, but this functionality is not reliable across various environments.
Make sure to invoke .delete() manually once you're done with the instance instead.
Originally allocated`);"captureStackTrace"in Error&&Error.captureStackTrace(d,Ur),a.leakWarning=d.stack.replace(/^Error: /,""),jt.register(t,a,t)}return t},Lr=t=>jt.unregister(t),ct(e)):(ct=t=>t,e),vu=()=>{let e=_t.prototype;Object.assign(e,{isAliasOf(i){if(!(this instanceof _t)||!(i instanceof _t))return!1;var o=this.$$.ptrType.registeredClass,a=this.$$.ptr;i.$$=i.$$;for(var l=i.$$.ptrType.registeredClass,d=i.$$.ptr;o.baseClass;)a=o.upcast(a),o=o.baseClass;for(;l.baseClass;)d=l.upcast(d),l=l.baseClass;return o===l&&a===d},clone(){if(this.$$.ptr||Vt(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var i=ct(Object.create(Object.getPrototypeOf(this),{$$:{value:Du(this.$$)}}));return i.$$.count.value+=1,i.$$.deleteScheduled=!1,i},delete(){this.$$.ptr||Vt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&V("Object already scheduled for deletion"),Lr(this),Rr(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||Vt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&V("Object already scheduled for deletion"),this.$$.deleteScheduled=!0,this}});const t=Symbol.dispose;t&&(e[t]=e.delete)};function _t(){}var Ht=(e,t)=>Object.defineProperty(t,"name",{value:e}),qt=(e,t,i)=>{if(e[t].overloadTable===void 0){var o=e[t];e[t]=function(...a){return e[t].overloadTable.hasOwnProperty(a.length)||V(`Function '${i}' called with an invalid number of arguments (${a.length}) - expects one of (${e[t].overloadTable})!`),e[t].overloadTable[a.length].apply(this,a)},e[t].overloadTable=[],e[t].overloadTable[o.argCount]=o}},xt=(e,t,i)=>{u.hasOwnProperty(e)?(V(`Cannot register public name '${e}' twice`),qt(u,e,e),u[e].overloadTable.hasOwnProperty(i)&&V(`Cannot register multiple overloads of a function with the same number of arguments (${i})!`),u[e].overloadTable[i]=t):(u[e]=t,u[e].argCount=i)},Fu=48,bu=57,Eu=e=>{b(typeof e=="string"),e=e.replace(/[^a-zA-Z0-9_]/g,"$");var t=e.charCodeAt(0);return t>=Fu&&t<=bu?`_${e}`:e};function Cu(e,t,i,o,a,l,d,D){this.name=e,this.constructor=t,this.instancePrototype=i,this.rawDestructor=o,this.baseClass=a,this.getActualType=l,this.upcast=d,this.downcast=D,this.pureVirtualFunctions=[]}var Bt=(e,t,i)=>{for(;t!==i;)t.upcast||V(`Expected null or instance of ${i.name}, got an instance of ${t.name}`),e=t.upcast(e),t=t.baseClass;return e};function Au(e,t){if(t===null)return this.isReference&&V(`null is not a valid ${this.name}`),0;t.$$||V(`Cannot pass "${Ue(t)}" as a ${this.name}`),t.$$.ptr||V(`Cannot pass deleted object as a pointer of type ${this.name}`);var i=t.$$.ptrType.registeredClass,o=Bt(t.$$.ptr,i,this.registeredClass);return o}function _u(e,t){var i;if(t===null)return this.isReference&&V(`null is not a valid ${this.name}`),this.isSmartPointer?(i=this.rawConstructor(),e!==null&&e.push(this.rawDestructor,i),i):0;(!t||!t.$$)&&V(`Cannot pass "${Ue(t)}" as a ${this.name}`),t.$$.ptr||V(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&t.$$.ptrType.isConst&&V(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);var o=t.$$.ptrType.registeredClass;if(i=Bt(t.$$.ptr,o,this.registeredClass),this.isSmartPointer)switch(t.$$.smartPtr===void 0&&V("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?i=t.$$.smartPtr:V(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:i=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)i=t.$$.smartPtr;else{var a=t.clone();i=this.rawShare(i,Jt.toHandle(()=>a.delete())),e!==null&&e.push(this.rawDestructor,i)}break;default:V("Unsupported sharing policy")}return i}function xu(e,t){if(t===null)return this.isReference&&V(`null is not a valid ${this.name}`),0;t.$$||V(`Cannot pass "${Ue(t)}" as a ${this.name}`),t.$$.ptr||V(`Cannot pass deleted object as a pointer of type ${this.name}`),t.$$.ptrType.isConst&&V(`Cannot convert argument of type ${t.$$.ptrType.name} to parameter type ${this.name}`);var i=t.$$.ptrType.registeredClass,o=Bt(t.$$.ptr,i,this.registeredClass);return o}var Bu=()=>{Object.assign(wt.prototype,{getPointee(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e},destructor(e){this.rawDestructor?.(e)},readValueFromPointer:st,fromWireType:Ur})};function wt(e,t,i,o,a,l,d,D,y,C,_){this.name=e,this.registeredClass=t,this.isReference=i,this.isConst=o,this.isSmartPointer=a,this.pointeeType=l,this.sharingPolicy=d,this.rawGetPointee=D,this.rawConstructor=y,this.rawShare=C,this.rawDestructor=_,!a&&t.baseClass===void 0?o?(this.toWireType=Au,this.destructorFunction=null):(this.toWireType=xu,this.destructorFunction=null):this.toWireType=_u}var wu=(e,t,i)=>{u.hasOwnProperty(e)||Ct("Replacing nonexistent public symbol"),u[e].overloadTable!==void 0&&i!==void 0||(u[e]=t,u[e].argCount=i)},Wr=[],Z=e=>{var t=Wr[e];return t||(Wr[e]=t=tr.get(e)),b(tr.get(e)==t,"JavaScript-side Wasm function table mirror is out of date!"),t},me=(e,t,i=!1)=>{b(!i,"Async bindings are only supported with JSPI."),e=ae(e);function o(){var l=Z(t);return l}var a=o();return typeof a!="function"&&V(`unknown function pointer with signature ${e}: ${t}`),a};class Su extends Error{}var Vr=e=>{var t=Yr(e),i=ae(t);return xe(t),i},Ze=(e,t)=>{var i=[],o={};function a(l){if(!o[l]&&!Ne[l]){if(Et[l]){Et[l].forEach(a);return}i.push(l),o[l]=!0}}throw t.forEach(a),new Su(`${e}: `+i.map(Vr).join([", "]))},Tu=(e,t,i,o,a,l,d,D,y,C,_,B,S)=>{_=ae(_),l=me(a,l),D&&=me(d,D),C&&=me(y,C),S=me(B,S);var I=Eu(_);xt(I,function(){Ze(`Cannot construct ${_} due to unbound types`,[o])}),_e([e,t,i],o?[o]:[],H=>{H=H[0];var z,re;o?(z=H.registeredClass,re=z.instancePrototype):re=_t.prototype;var ne=Ht(_,function(...rr){if(Object.getPrototypeOf(this)!==Be)throw new at(`Use 'new' to construct ${_}`);if(he.constructor_body===void 0)throw new at(`${_} has no accessible constructor`);var dn=he.constructor_body[rr.length];if(dn===void 0)throw new at(`Tried to invoke ctor of ${_} with invalid number of parameters (${rr.length}) - expected (${Object.keys(he.constructor_body).toString()}) parameters instead!`);return dn.apply(this,rr)}),Be=Object.create(re,{constructor:{value:ne}});ne.prototype=Be;var he=new Cu(_,ne,Be,S,z,l,D,C);he.baseClass&&(he.baseClass.__derivedClasses??=[],he.baseClass.__derivedClasses.push(he));var Zi=new wt(_,he,!0,!1,!1),cn=new wt(_+"*",he,!1,!1,!1),ln=new wt(_+" const*",he,!1,!0,!1);return Nr[e]={pointerType:cn,constPointerType:ln},wu(I,ne),[Zi,cn,ln]})};function jr(e){for(var t=1;t<e.length;++t)if(e[t]!==null&&e[t].destructorFunction===void 0)return!0;return!1}function $u(e,t,i,o,a){if(e<t||e>i){var l=t==i?t:`${t} to ${i}`;a(`function ${o} called with ${e} arguments, expected ${l}`)}}function ku(e,t,i,o){var a=jr(e),l=e.length-2,d=[],D=["fn"];t&&D.push("thisWired");for(var y=0;y<l;++y)d.push(`arg${y}`),D.push(`arg${y}Wired`);d=d.join(","),D=D.join(",");var C=`return function (${d}) {
`;C+=`checkArgCount(arguments.length, minArgs, maxArgs, humanName, throwBindingError);
`,a&&(C+=`var destructors = [];
`);var _=a?"destructors":"null",B=["humanName","throwBindingError","invoker","fn","runDestructors","fromRetWire","toClassParamWire"];t&&(C+=`var thisWired = toClassParamWire(${_}, this);
`);for(var y=0;y<l;++y){var S=`toArg${y}Wire`;C+=`var arg${y}Wired = ${S}(${_}, arg${y});
`,B.push(S)}if(C+=(i||o?"var rv = ":"")+`invoker(${D});
`,a)C+=`runDestructors(destructors);
`;else for(var y=t?1:2;y<e.length;++y){var I=y===1?"thisWired":"arg"+(y-2)+"Wired";e[y].destructorFunction!==null&&(C+=`${I}_dtor(${I});
`,B.push(`${I}_dtor`))}return i&&(C+=`var ret = fromRetWire(rv);
return ret;
`),C+=`}
`,B.push("checkArgCount","minArgs","maxArgs"),C=`if (arguments.length !== ${B.length}){ throw new Error(humanName + "Expected ${B.length} closure arguments " + arguments.length + " given."); }
${C}`,new Function(B,C)}function Iu(e){for(var t=e.length-2,i=e.length-1;i>=2&&e[i].optional;--i)t--;return t}function zt(e,t,i,o,a,l){var d=t.length;d<2&&V("argTypes array size mismatch! Must at least get return value and 'this' types!"),b(!l,"Async bindings are only supported with JSPI.");for(var D=t[1]!==null&&i!==null,y=jr(t),C=!t[0].isVoid,_=d-2,B=Iu(t),S=t[0],I=t[1],H=[e,V,o,a,Wt,S.fromWireType.bind(S),I?.toWireType.bind(I)],z=2;z<d;++z){var re=t[z];H.push(re.toWireType.bind(re))}if(!y)for(var z=D?1:2;z<t.length;++z)t[z].destructorFunction!==null&&H.push(t[z].destructorFunction);H.push($u,B,_);var Be=ku(t,D,C,l)(...H);return Ht(e,Be)}var Gt=(e,t)=>{for(var i=[],o=0;o<e;o++)i.push(j[t+o*4>>2]);return i},Hr=e=>{e=e.trim();const t=e.indexOf("(");return t===-1?e:(b(e.endsWith(")"),"Parentheses for argument names should match."),e.slice(0,t))},Pu=(e,t,i,o,a,l,d,D,y)=>{var C=Gt(i,o);t=ae(t),t=Hr(t),l=me(a,l,D),_e([],[e],_=>{_=_[0];var B=`${_.name}.${t}`;function S(){Ze(`Cannot call ${B} due to unbound types`,C)}t.startsWith("@@")&&(t=Symbol[t.substring(2)]);var I=_.registeredClass.constructor;return I[t]===void 0?(S.argCount=i-1,I[t]=S):(qt(I,t,B),I[t].overloadTable[i-1]=S),_e([],C,H=>{var z=[H[0],null].concat(H.slice(1)),re=zt(B,z,null,l,d,D);if(I[t].overloadTable===void 0?(re.argCount=i-1,I[t]=re):I[t].overloadTable[i-1]=re,_.registeredClass.__derivedClasses)for(const ne of _.registeredClass.__derivedClasses)ne.constructor.hasOwnProperty(t)||(ne.constructor[t]=re);return[]}),[]})},Ou=(e,t,i,o,a,l)=>{b(t>0);var d=Gt(t,i);a=me(o,a),_e([],[e],D=>{D=D[0];var y=`constructor ${D.name}`;if(D.registeredClass.constructor_body===void 0&&(D.registeredClass.constructor_body=[]),D.registeredClass.constructor_body[t-1]!==void 0)throw new at(`Cannot register multiple constructors with identical number of parameters (${t-1}) for class '${D.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return D.registeredClass.constructor_body[t-1]=()=>{Ze(`Cannot construct ${D.name} due to unbound types`,d)},_e([],d,C=>(C.splice(1,0,null),D.registeredClass.constructor_body[t-1]=zt(y,C,null,a,l),[])),[]})},Lu=(e,t,i,o,a,l,d,D,y,C)=>{var _=Gt(i,o);t=ae(t),t=Hr(t),l=me(a,l,y),_e([],[e],B=>{B=B[0];var S=`${B.name}.${t}`;t.startsWith("@@")&&(t=Symbol[t.substring(2)]),D&&B.registeredClass.pureVirtualFunctions.push(t);function I(){Ze(`Cannot call ${S} due to unbound types`,_)}var H=B.registeredClass.instancePrototype,z=H[t];return z===void 0||z.overloadTable===void 0&&z.className!==B.name&&z.argCount===i-2?(I.argCount=i-2,I.className=B.name,H[t]=I):(qt(H,t,S),H[t].overloadTable[i-2]=I),_e([],_,re=>{var ne=zt(S,re,B,l,d,y);return H[t].overloadTable===void 0?(ne.argCount=i-2,H[t]=ne):H[t].overloadTable[i-2]=ne,[]}),[]})},qr=(e,t,i)=>(e instanceof Object||V(`${i} with invalid "this": ${e}`),e instanceof t.registeredClass.constructor||V(`${i} incompatible with "this" of type ${e.constructor.name}`),e.$$.ptr||V(`cannot call emscripten binding method ${i} on deleted object`),Bt(e.$$.ptr,e.$$.ptrType.registeredClass,t.registeredClass)),Ru=(e,t,i,o,a,l,d,D,y,C)=>{t=ae(t),a=me(o,a),_e([],[e],_=>{_=_[0];var B=`${_.name}.${t}`,S={get(){Ze(`Cannot access ${B} due to unbound types`,[i,d])},enumerable:!0,configurable:!0};return y?S.set=()=>Ze(`Cannot access ${B} due to unbound types`,[i,d]):S.set=I=>V(B+" is a read-only property"),Object.defineProperty(_.registeredClass.instancePrototype,t,S),_e([],y?[i,d]:[i],I=>{var H=I[0],z={get(){var ne=qr(this,_,B+" getter");return H.fromWireType(a(l,ne))},enumerable:!0};if(y){y=me(D,y);var re=I[1];z.set=function(ne){var Be=qr(this,_,B+" setter"),he=[];y(C,Be,re.toWireType(he,ne)),Wt(he)}}return Object.defineProperty(_.registeredClass.instancePrototype,t,z),[]}),[]})},zr=[],Se=[0,1,,1,null,1,!0,1,!1,1],Mu=e=>{e>9&&--Se[e+1]===0&&(b(Se[e]!==void 0,"Decref for unallocated handle."),Se[e]=void 0,zr.push(e))},Jt={toValue:e=>(e||V(`Cannot use deleted val. handle = ${e}`),b(e===2||Se[e]!==void 0&&e%2===0,`invalid handle: ${e}`),Se[e]),toHandle:e=>{switch(e){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const t=zr.pop()||Se.length;return Se[t]=e,Se[t+1]=1,t}}}},Nu={name:"emscripten::val",fromWireType:e=>{var t=Jt.toValue(e);return Mu(e),t},toWireType:(e,t)=>Jt.toHandle(t),readValueFromPointer:st,destructorFunction:null},Uu=e=>ye(e,Nu),Xt=(e,t,i)=>{switch(t){case 1:return i?function(o){return this.fromWireType(De[o])}:function(o){return this.fromWireType(ge[o])};case 2:return i?function(o){return this.fromWireType(te[o>>1])}:function(o){return this.fromWireType(pe[o>>1])};case 4:return i?function(o){return this.fromWireType(Ge[o>>2])}:function(o){return this.fromWireType(j[o>>2])};default:throw new TypeError(`invalid integer width (${t}): ${e}`)}};function Wu(e){return e===0?"object":e===1?"number":"string"}var Vu=(e,t,i,o,a)=>{t=ae(t);const l=Wu(a);switch(l){case"object":{let C=function(){};C.values={},ye(e,{name:t,constructor:C,valueType:l,fromWireType:function(_){return this.constructor.values[_]},toWireType:(_,B)=>B.value,readValueFromPointer:Xt(t,i,o),destructorFunction:null}),xt(t,C);break}case"number":{var d={};ye(e,{name:t,keysMap:d,valueType:l,fromWireType:C=>C,toWireType:(C,_)=>_,readValueFromPointer:Xt(t,i,o),destructorFunction:null}),xt(t,d),delete u[t].argCount;break}case"string":{var D={},y={},d={};ye(e,{name:t,valuesMap:D,reverseMap:y,keysMap:d,valueType:l,fromWireType:function(_){return this.reverseMap[_]},toWireType:function(_,B){return this.valuesMap[B]},readValueFromPointer:Xt(t,i,o),destructorFunction:null}),xt(t,d),delete u[t].argCount;break}}},ju=(e,t)=>{var i=Ne[e];return i===void 0&&V(`${t} has unknown type ${Vr(e)}`),i},Hu=(e,t,i)=>{var o=ju(e,"enum");switch(t=ae(t),o.valueType){case"object":{var a=o.constructor,l=Object.create(o.constructor.prototype,{value:{value:i},constructor:{value:Ht(`${o.name}_${t}`,function(){})}});a.values[i]=l,a[t]=l;break}case"number":{o.keysMap[t]=i;break}case"string":{o.valuesMap[t]=i,o.reverseMap[i]=t,o.keysMap[t]=t;break}}},qu=(e,t)=>{switch(t){case 4:return function(i){return this.fromWireType(Cr[i>>2])};case 8:return function(i){return this.fromWireType(Ar[i>>3])};default:throw new TypeError(`invalid float width (${t}): ${e}`)}},zu=(e,t,i)=>{t=ae(t),ye(e,{name:t,fromWireType:o=>o,toWireType:(o,a)=>{if(typeof a!="number"&&typeof a!="boolean")throw new TypeError(`Cannot convert ${Ue(a)} to ${this.name}`);return a},readValueFromPointer:qu(t,i),destructorFunction:null})},Gu=(e,t,i,o,a)=>{t=ae(t);const l=o===0;let d=y=>y;if(l){var D=32-8*i;d=y=>y<<D>>>D,a=d(a)}ye(e,{name:t,fromWireType:d,toWireType:(y,C)=>{if(typeof C!="number"&&typeof C!="boolean")throw new TypeError(`Cannot convert "${Ue(C)}" to ${t}`);return Or(t,C,o,a),C},readValueFromPointer:Pr(t,i,o!==0),destructorFunction:null})},Ju=(e,t,i)=>{var o=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array],a=o[t];function l(d){var D=j[d>>2],y=j[d+4>>2];return new a(De.buffer,y,D)}i=ae(i),ye(e,{name:i,fromWireType:l,readValueFromPointer:l},{ignoreDuplicateRegistrations:!0})},Xu=(e,t,i,o)=>{if(b(typeof e=="string",`stringToUTF8Array expects a string (got ${typeof e})`),!(o>0))return 0;for(var a=i,l=i+o-1,d=0;d<e.length;++d){var D=e.codePointAt(d);if(D<=127){if(i>=l)break;t[i++]=D}else if(D<=2047){if(i+1>=l)break;t[i++]=192|D>>6,t[i++]=128|D&63}else if(D<=65535){if(i+2>=l)break;t[i++]=224|D>>12,t[i++]=128|D>>6&63,t[i++]=128|D&63}else{if(i+3>=l)break;D>1114111&&it("Invalid Unicode code point "+Je(D)+" encountered when serializing a JS string to a UTF-8 string in wasm memory! (Valid unicode code points should be in range 0-0x10FFFF)."),t[i++]=240|D>>18,t[i++]=128|D>>12&63,t[i++]=128|D>>6&63,t[i++]=128|D&63,d++}}return t[i]=0,i-a},Ke=(e,t,i)=>(b(typeof i=="number","stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),Xu(e,ge,t,i)),St=e=>{for(var t=0,i=0;i<e.length;++i){var o=e.charCodeAt(i);o<=127?t++:o<=2047?t+=2:o>=55296&&o<=57343?(t+=4,++i):t+=3}return t},Yu=(e,t)=>{t=ae(t),ye(e,{name:t,fromWireType(i){var o=j[i>>2],a=i+4,l;return l=Xe(a,o,!0),xe(i),l},toWireType(i,o){o instanceof ArrayBuffer&&(o=new Uint8Array(o));var a,l=typeof o=="string";l||ArrayBuffer.isView(o)&&o.BYTES_PER_ELEMENT==1||V("Cannot pass non-string to std::string"),l?a=St(o):a=o.length;var d=Kt(4+a+1),D=d+4;return j[d>>2]=a,l?Ke(o,D,a+1):ge.set(o,D),i!==null&&i.push(xe,d),d},readValueFromPointer:st,destructorFunction(i){xe(i)}})},Gr=globalThis.TextDecoder?new TextDecoder("utf-16le"):void 0,Zu=(e,t,i)=>{b(e%2==0,"Pointer passed to UTF16ToString must be aligned to two bytes!");var o=e>>1,a=$r(pe,o,t/2,i);if(a-o>16&&Gr)return Gr.decode(pe.subarray(o,a));for(var l="",d=o;d<a;++d){var D=pe[d];l+=String.fromCharCode(D)}return l},Ku=(e,t,i)=>{if(b(t%2==0,"Pointer passed to stringToUTF16 must be aligned to two bytes!"),b(typeof i=="number","stringToUTF16(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),i??=2147483647,i<2)return 0;i-=2;for(var o=t,a=i<e.length*2?i/2:e.length,l=0;l<a;++l){var d=e.charCodeAt(l);te[t>>1]=d,t+=2}return te[t>>1]=0,t-o},Qu=e=>e.length*2,ei=(e,t,i)=>{b(e%4==0,"Pointer passed to UTF32ToString must be aligned to four bytes!");for(var o="",a=e>>2,l=0;!(l>=t/4);l++){var d=j[a+l];if(!d&&!i)break;o+=String.fromCodePoint(d)}return o},ti=(e,t,i)=>{if(b(t%4==0,"Pointer passed to stringToUTF32 must be aligned to four bytes!"),b(typeof i=="number","stringToUTF32(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),i??=2147483647,i<4)return 0;for(var o=t,a=o+i-4,l=0;l<e.length;++l){var d=e.codePointAt(l);if(d>65535&&l++,Ge[t>>2]=d,t+=4,t+4>a)break}return Ge[t>>2]=0,t-o},ri=e=>{for(var t=0,i=0;i<e.length;++i){var o=e.codePointAt(i);o>65535&&i++,t+=4}return t},ni=(e,t,i)=>{i=ae(i);var o,a,l;t===2?(o=Zu,a=Ku,l=Qu):(b(t===4,"only 2-byte and 4-byte strings are currently supported"),o=ei,a=ti,l=ri),ye(e,{name:i,fromWireType:d=>{var D=j[d>>2],y=o(d+4,D*t,!0);return xe(d),y},toWireType:(d,D)=>{typeof D!="string"&&V(`Cannot pass non-string to C++ string type ${i}`);var y=l(D),C=Kt(4+y+t);return j[C>>2]=y/t,a(D,C+4,y+t),d!==null&&d.push(xe,C),C},readValueFromPointer:st,destructorFunction(d){xe(d)}})},ui=(e,t,i,o,a,l)=>{bt[e]={name:ae(t),rawConstructor:me(i,o),rawDestructor:me(a,l),fields:[]}},ii=(e,t,i,o,a,l,d,D,y,C)=>{bt[e].fields.push({fieldName:ae(t),getterReturnType:i,getter:me(o,a),getterContext:l,setterArgumentType:d,setter:me(D,y),setterContext:C})},oi=(e,t)=>{t=ae(t),ye(e,{isVoid:!0,name:t,fromWireType:()=>{},toWireType:(i,o)=>{}})},si=(e,t,i,o)=>{var a=new Date().getFullYear(),l=new Date(a,0,1),d=new Date(a,6,1),D=l.getTimezoneOffset(),y=d.getTimezoneOffset(),C=Math.max(D,y);j[e>>2]=C*60,Ge[t>>2]=+(D!=y);var _=I=>{var H=I>=0?"-":"+",z=Math.abs(I),re=String(Math.floor(z/60)).padStart(2,"0"),ne=String(z%60).padStart(2,"0");return`UTC${H}${re}${ne}`},B=_(D),S=_(y);b(B),b(S),b(St(B)<=16,`timezone name truncated to fit in TZNAME_MAX (${B})`),b(St(S)<=16,`timezone name truncated to fit in TZNAME_MAX (${S})`),y<D?(Ke(B,i,17),Ke(S,o,17)):(Ke(B,o,17),Ke(S,i,17))},ai=e=>{le(`Cannot enlarge memory arrays to size ${e} bytes (OOM). Either (1) compile with -sINITIAL_MEMORY=X with X higher than the current value ${De.length}, (2) compile with -sALLOW_MEMORY_GROWTH which allows increasing the size at runtime, or (3) if you want malloc to return NULL (0) instead of this abort, compile with -sABORTING_MALLOC=0`)},ci=e=>{ge.length,e>>>=0,ai(e)},Yt={},li=()=>F||"./this.program",lt=()=>{if(!lt.strings){var e=(globalThis.navigator?.language??"C").replace("-","_")+".UTF-8",t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:li()};for(var i in Yt)Yt[i]===void 0?delete t[i]:t[i]=Yt[i];var o=[];for(var i in t)o.push(`${i}=${t[i]}`);lt.strings=o}return lt.strings},di=(e,t)=>{var i=0,o=0;for(var a of lt()){var l=t+i;j[e+o>>2]=l,i+=Ke(a,l,1/0)+1,o+=4}return 0},fi=(e,t)=>{var i=lt();j[e>>2]=i.length;var o=0;for(var a of i)o+=St(a)+1;return j[t>>2]=o,0},pi=e=>{le("fd_close called without SYSCALLS_REQUIRE_FILESYSTEM")};function Di(e,t,i,o){return 70}var gi=[null,[],[]],yi=(e,t)=>{var i=gi[e];b(i),t===0||t===10?((e===1?x:T)(kr(i)),i.length=0):i.push(t)},mi=(e,t,i,o)=>{for(var a=0,l=0;l<i;l++){var d=j[t>>2],D=j[t+4>>2];t+=8;for(var y=0;y<D;y++)yi(e,ge[d+y]);a+=D}return j[o>>2]=a,0},Zt=e=>e instanceof ze?e.excPtr:e,hi=e=>Tt(Zt(e)),vi=e=>er(Zt(e)),Jr=e=>en(e),Fi=e=>{var t=Y(),i=Jr(4),o=Jr(4);rn(e,i,o);var a=j[i>>2],l=j[o>>2],d=Xe(a);xe(a);var D;return l&&(D=Xe(l),xe(l)),X(t),[d,D]},Xr=e=>Fi(Zt(e));vu(),Bu(),b(Se.length===10);{if(u.noExitRuntime&&u.noExitRuntime,u.print&&(x=u.print),u.printErr&&(T=u.printErr),u.wasmBinary&&(w=u.wasmBinary),u.FS_createDataFile=Ee.createDataFile,u.FS_createPreloadedFile=Ee.createPreloadedFile,Ci(),u.arguments&&u.arguments,u.thisProgram&&(F=u.thisProgram),b(typeof u.memoryInitializerPrefixURL>"u","Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),b(typeof u.pthreadMainPrefixURL>"u","Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),b(typeof u.cdInitializerPrefixURL>"u","Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),b(typeof u.filePackagePrefixURL>"u","Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),b(typeof u.read>"u","Module.read option was removed"),b(typeof u.readAsync>"u","Module.readAsync option was removed (modify readAsync in JS)"),b(typeof u.readBinary>"u","Module.readBinary option was removed (modify readBinary in JS)"),b(typeof u.setWindowTitle>"u","Module.setWindowTitle option was removed (modify emscripten_set_window_title in JS)"),b(typeof u.TOTAL_MEMORY>"u","Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY"),b(typeof u.ENVIRONMENT>"u","Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -sENVIRONMENT=web or -sENVIRONMENT=node)"),b(typeof u.STACK_SIZE>"u","STACK_SIZE can no longer be set at runtime.  Use -sSTACK_SIZE at link time"),b(typeof u.wasmMemory>"u","Use of `wasmMemory` detected.  Use -sIMPORTED_MEMORY to define wasmMemory externally"),b(typeof u.INITIAL_MEMORY>"u","Detected runtime INITIAL_MEMORY setting.  Use -sIMPORTED_MEMORY to define wasmMemory dynamically"),u.preInit)for(typeof u.preInit=="function"&&(u.preInit=[u.preInit]);u.preInit.length>0;)u.preInit.shift()();Ie("preInit")}var bi=["writeI53ToI64","writeI53ToI64Clamped","writeI53ToI64Signaling","writeI53ToU64Clamped","writeI53ToU64Signaling","readI53FromI64","readI53FromU64","convertI32PairToI53","convertI32PairToI53Checked","convertU32PairToI53","getTempRet0","zeroMemory","exitJS","getHeapMax","growMemory","withStackSave","strError","inetPton4","inetNtop4","inetPton6","inetNtop6","readSockaddr","writeSockaddr","readEmAsmArgs","jstoi_q","autoResumeAudioContext","getDynCaller","dynCall","handleException","keepRuntimeAlive","runtimeKeepalivePush","runtimeKeepalivePop","callUserCallback","maybeExit","asyncLoad","asmjsMangle","alignMemory","mmapAlloc","HandleAllocator","getUniqueRunDependency","addRunDependency","removeRunDependency","addOnInit","addOnPostCtor","addOnPreMain","addOnExit","STACK_SIZE","STACK_ALIGN","POINTER_SIZE","ASSERTIONS","ccall","cwrap","convertJsFunctionToWasm","getEmptyTableSlot","updateTableMap","getFunctionAddress","addFunction","removeFunction","intArrayFromString","intArrayToString","stringToAscii","stringToNewUTF8","stringToUTF8OnStack","writeArrayToMemory","registerKeyEventCallback","maybeCStringToJsString","findEventTarget","getBoundingClientRect","fillMouseEventData","registerMouseEventCallback","registerWheelEventCallback","registerUiEventCallback","registerFocusEventCallback","fillDeviceOrientationEventData","registerDeviceOrientationEventCallback","fillDeviceMotionEventData","registerDeviceMotionEventCallback","screenOrientation","fillOrientationChangeEventData","registerOrientationChangeEventCallback","fillFullscreenChangeEventData","registerFullscreenChangeEventCallback","JSEvents_requestFullscreen","JSEvents_resizeCanvasForFullscreen","registerRestoreOldStyle","hideEverythingExceptGivenElement","restoreHiddenElements","setLetterbox","softFullscreenResizeWebGLRenderTarget","doRequestFullscreen","fillPointerlockChangeEventData","registerPointerlockChangeEventCallback","registerPointerlockErrorEventCallback","requestPointerLock","fillVisibilityChangeEventData","registerVisibilityChangeEventCallback","registerTouchEventCallback","fillGamepadEventData","registerGamepadEventCallback","registerBeforeUnloadEventCallback","fillBatteryEventData","registerBatteryEventCallback","setCanvasElementSize","getCanvasElementSize","jsStackTrace","getCallstack","convertPCtoSourceLocation","checkWasiClock","wasiRightsToMuslOFlags","wasiOFlagsToMuslOFlags","initRandomFill","randomFill","safeSetTimeout","setImmediateWrapped","safeRequestAnimationFrame","clearImmediateWrapped","registerPostMainLoop","registerPreMainLoop","getPromise","makePromise","idsToPromises","makePromiseCallback","Browser_asyncPrepareDataCounter","isLeapYear","ydayFromDate","arraySum","addDays","getSocketFromFD","getSocketAddress","FS_createPreloadedFile","FS_preloadFile","FS_modeStringToFlags","FS_getMode","FS_stdin_getChar","FS_mkdirTree","_setNetworkCallback","heapObjectForWebGLType","toTypedArrayIndex","webgl_enable_ANGLE_instanced_arrays","webgl_enable_OES_vertex_array_object","webgl_enable_WEBGL_draw_buffers","webgl_enable_WEBGL_multi_draw","webgl_enable_EXT_polygon_offset_clamp","webgl_enable_EXT_clip_control","webgl_enable_WEBGL_polygon_mode","emscriptenWebGLGet","computeUnpackAlignedImageSize","colorChannelsInGlTextureFormat","emscriptenWebGLGetTexPixelData","emscriptenWebGLGetUniform","webglGetUniformLocation","webglPrepareUniformLocationsBeforeFirstUse","webglGetLeftBracePos","emscriptenWebGLGetVertexAttrib","__glGetActiveAttribOrUniform","writeGLArray","registerWebGlEventCallback","runAndAbortIfError","ALLOC_NORMAL","ALLOC_STACK","allocate","writeStringToMemory","writeAsciiToMemory","allocateUTF8","allocateUTF8OnStack","demangle","stackTrace","getNativeTypeSize","getFunctionArgsName","createJsInvokerSignature","PureVirtualError","registerInheritedInstance","unregisterInheritedInstance","getInheritedInstanceCount","getLiveInheritedInstances","installIndexedIterator","setDelayFunction","count_emval_handles","getStringOrSymbol","emval_returnValue","emval_lookupTypes","emval_addMethodCaller"];bi.forEach(q);var Ei=["run","out","err","callMain","abort","wasmExports","HEAPF32","HEAPF64","HEAP8","HEAPU8","HEAP16","HEAPU16","HEAP32","HEAPU32","HEAP64","HEAPU64","writeStackCookie","checkStackCookie","INT53_MAX","INT53_MIN","bigintToI53Checked","stackSave","stackRestore","stackAlloc","setTempRet0","createNamedFunction","ptrToString","abortOnCannotGrowMemory","ENV","ERRNO_CODES","DNS","Protocols","Sockets","timers","warnOnce","readEmAsmArgsArray","getExecutableName","wasmTable","wasmMemory","noExitRuntime","addOnPreRun","addOnPostRun","freeTableIndexes","functionsInTableMap","setValue","getValue","PATH","PATH_FS","UTF8Decoder","UTF8ArrayToString","UTF8ToString","stringToUTF8Array","stringToUTF8","lengthBytesUTF8","AsciiToString","UTF16Decoder","UTF16ToString","stringToUTF16","lengthBytesUTF16","UTF32ToString","stringToUTF32","lengthBytesUTF32","JSEvents","specialHTMLTargets","findCanvasEventTarget","currentFullscreenStrategy","restoreOldWindowedStyle","UNWIND_CACHE","ExitStatus","getEnvStrings","flush_NO_FILESYSTEM","emSetImmediate","emClearImmediate_deps","emClearImmediate","promiseMap","uncaughtExceptionCount","exceptionLast","exceptionCaught","ExceptionInfo","findMatchingCatch","getExceptionMessageCommon","exnToPtr","Browser","requestFullscreen","requestFullScreen","setCanvasSize","getUserMedia","createContext","getPreloadedImageData__data","wget","MONTH_DAYS_REGULAR","MONTH_DAYS_LEAP","MONTH_DAYS_REGULAR_CUMULATIVE","MONTH_DAYS_LEAP_CUMULATIVE","SYSCALLS","preloadPlugins","FS_stdin_getChar_buffer","FS_unlink","FS_createPath","FS_createDevice","FS_readFile","FS","FS_root","FS_mounts","FS_devices","FS_streams","FS_nextInode","FS_nameTable","FS_currentPath","FS_initialized","FS_ignorePermissions","FS_filesystems","FS_syncFSRequests","FS_readFiles","FS_lookupPath","FS_getPath","FS_hashName","FS_hashAddNode","FS_hashRemoveNode","FS_lookupNode","FS_createNode","FS_destroyNode","FS_isRoot","FS_isMountpoint","FS_isFile","FS_isDir","FS_isLink","FS_isChrdev","FS_isBlkdev","FS_isFIFO","FS_isSocket","FS_flagsToPermissionString","FS_nodePermissions","FS_mayLookup","FS_mayCreate","FS_mayDelete","FS_mayOpen","FS_checkOpExists","FS_nextfd","FS_getStreamChecked","FS_getStream","FS_createStream","FS_closeStream","FS_dupStream","FS_doSetAttr","FS_chrdev_stream_ops","FS_major","FS_minor","FS_makedev","FS_registerDevice","FS_getDevice","FS_getMounts","FS_syncfs","FS_mount","FS_unmount","FS_lookup","FS_mknod","FS_statfs","FS_statfsStream","FS_statfsNode","FS_create","FS_mkdir","FS_mkdev","FS_symlink","FS_rename","FS_rmdir","FS_readdir","FS_readlink","FS_stat","FS_fstat","FS_lstat","FS_doChmod","FS_chmod","FS_lchmod","FS_fchmod","FS_doChown","FS_chown","FS_lchown","FS_fchown","FS_doTruncate","FS_truncate","FS_ftruncate","FS_utime","FS_open","FS_close","FS_isClosed","FS_llseek","FS_read","FS_write","FS_mmap","FS_msync","FS_ioctl","FS_writeFile","FS_cwd","FS_chdir","FS_createDefaultDirectories","FS_createDefaultDevices","FS_createSpecialDirectories","FS_createStandardStreams","FS_staticInit","FS_init","FS_quit","FS_findObject","FS_analyzePath","FS_createFile","FS_createDataFile","FS_forceLoadFile","FS_createLazyFile","FS_absolutePath","FS_createFolder","FS_createLink","FS_joinPath","FS_mmapAlloc","FS_standardizePath","MEMFS","TTY","PIPEFS","SOCKFS","tempFixedLengthArray","miniTempWebGLFloatBuffers","miniTempWebGLIntBuffers","GL","AL","GLUT","EGL","GLEW","IDBStore","SDL","SDL_gfx","print","printErr","jstoi_s","InternalError","BindingError","throwInternalError","throwBindingError","registeredTypes","awaitingDependencies","typeDependencies","tupleRegistrations","structRegistrations","sharedRegisterType","whenDependentTypesAreResolved","getTypeName","getFunctionName","heap32VectorToArray","requireRegisteredType","usesDestructorStack","checkArgCount","getEnumValueType","getRequiredArgCount","createJsInvoker","UnboundTypeError","EmValType","EmValOptionalType","throwUnboundTypeError","ensureOverloadTable","exposePublicSymbol","replacePublicSymbol","embindRepr","registeredInstances","getBasestPointer","getInheritedInstance","registeredPointers","registerType","integerReadValueFromPointer","enumReadValueFromPointer","floatReadValueFromPointer","assertIntegerRange","readPointer","runDestructors","craftInvokerFunction","embind__requireFunction","genericPointerToWireType","constNoSmartPtrRawPointerToWireType","nonConstNoSmartPtrRawPointerToWireType","init_RegisteredPointer","RegisteredPointer","RegisteredPointer_fromWireType","runDestructor","releaseClassHandle","finalizationRegistry","detachFinalizer_deps","detachFinalizer","attachFinalizer","makeClassHandle","init_ClassHandle","ClassHandle","throwInstanceAlreadyDeleted","deletionQueue","flushPendingDeletes","delayFunction","RegisteredClass","shallowCopyInternalPointer","downcastPointer","upcastPointer","validateThis","char_0","char_9","makeLegalFunctionName","emval_freelist","emval_handles","emval_symbols","Emval","emval_methodCallers"];Ei.forEach(G),u.incrementExceptionRefcount=hi,u.decrementExceptionRefcount=vi,u.getExceptionMessage=Xr;function Ci(){E("fetchSettings")}var Yr=f("___getTypeName"),Kt=f("_malloc"),Qt=f("_emscripten_stack_get_end"),xe=f("_free"),J=f("_setThrew"),Zr=f("__emscripten_tempret_set"),Kr=f("_emscripten_stack_init"),Qr=f("__emscripten_stack_restore"),en=f("__emscripten_stack_alloc"),tn=f("_emscripten_stack_get_current"),er=f("___cxa_decrement_exception_refcount"),Tt=f("___cxa_increment_exception_refcount"),rn=f("___get_exception_message"),nn=f("___cxa_can_catch"),un=f("___cxa_get_exception_ptr"),on=f("wasmMemory"),tr=f("wasmTable");function Ai(e){b(typeof e.__getTypeName<"u","missing Wasm export: __getTypeName"),b(typeof e.malloc<"u","missing Wasm export: malloc"),b(typeof e.fflush<"u","missing Wasm export: fflush"),b(typeof e.emscripten_stack_get_end<"u","missing Wasm export: emscripten_stack_get_end"),b(typeof e.emscripten_stack_get_base<"u","missing Wasm export: emscripten_stack_get_base"),b(typeof e.strerror<"u","missing Wasm export: strerror"),b(typeof e.free<"u","missing Wasm export: free"),b(typeof e.setThrew<"u","missing Wasm export: setThrew"),b(typeof e._emscripten_tempret_set<"u","missing Wasm export: _emscripten_tempret_set"),b(typeof e.emscripten_stack_init<"u","missing Wasm export: emscripten_stack_init"),b(typeof e.emscripten_stack_get_free<"u","missing Wasm export: emscripten_stack_get_free"),b(typeof e._emscripten_stack_restore<"u","missing Wasm export: _emscripten_stack_restore"),b(typeof e._emscripten_stack_alloc<"u","missing Wasm export: _emscripten_stack_alloc"),b(typeof e.emscripten_stack_get_current<"u","missing Wasm export: emscripten_stack_get_current"),b(typeof e.__cxa_free_exception<"u","missing Wasm export: __cxa_free_exception"),b(typeof e.__cxa_decrement_exception_refcount<"u","missing Wasm export: __cxa_decrement_exception_refcount"),b(typeof e.__cxa_increment_exception_refcount<"u","missing Wasm export: __cxa_increment_exception_refcount"),b(typeof e.__get_exception_message<"u","missing Wasm export: __get_exception_message"),b(typeof e.__cxa_can_catch<"u","missing Wasm export: __cxa_can_catch"),b(typeof e.__cxa_get_exception_ptr<"u","missing Wasm export: __cxa_get_exception_ptr"),b(typeof e.memory<"u","missing Wasm export: memory"),b(typeof e.__indirect_function_table<"u","missing Wasm export: __indirect_function_table"),Yr=Ae("__getTypeName",1),Kt=Ae("malloc",1),Qt=e.emscripten_stack_get_end,e.emscripten_stack_get_base,xe=Ae("free",1),J=Ae("setThrew",2),Zr=Ae("_emscripten_tempret_set",1),Kr=e.emscripten_stack_init,e.emscripten_stack_get_free,Qr=e._emscripten_stack_restore,en=e._emscripten_stack_alloc,tn=e.emscripten_stack_get_current,er=Ae("__cxa_decrement_exception_refcount",1),Tt=Ae("__cxa_increment_exception_refcount",1),rn=Ae("__get_exception_message",3),nn=Ae("__cxa_can_catch",3),un=Ae("__cxa_get_exception_ptr",1),on=e.memory,tr=e.__indirect_function_table}var sn={__assert_fail:Qn,__cxa_begin_catch:eu,__cxa_end_catch:tu,__cxa_find_matching_catch_2:ru,__cxa_find_matching_catch_3:nu,__cxa_rethrow:uu,__cxa_throw:iu,__cxa_uncaught_exceptions:ou,__resumeException:su,_abort_js:au,_embind_finalize_value_object:lu,_embind_register_bigint:fu,_embind_register_bool:pu,_embind_register_class:Tu,_embind_register_class_class_function:Pu,_embind_register_class_constructor:Ou,_embind_register_class_function:Lu,_embind_register_class_property:Ru,_embind_register_emval:Uu,_embind_register_enum:Vu,_embind_register_enum_value:Hu,_embind_register_float:zu,_embind_register_integer:Gu,_embind_register_memory_view:Ju,_embind_register_std_string:Yu,_embind_register_std_wstring:ni,_embind_register_value_object:ui,_embind_register_value_object_field:ii,_embind_register_void:oi,_tzset_js:si,emscripten_resize_heap:ci,environ_get:di,environ_sizes_get:fi,fd_close:pi,fd_seek:Di,fd_write:mi,invoke_diii:ji,invoke_fiii:Vi,invoke_i:Hi,invoke_ii:Ti,invoke_iii:Si,invoke_iiii:wi,invoke_iiiii:Ni,invoke_iiiiii:Oi,invoke_iiiiiii:Pi,invoke_iiiiiiii:Ri,invoke_iiiiiiiiiii:Mi,invoke_iiiiiiiiiiii:zi,invoke_iiiiiiiiiiiii:Wi,invoke_jiiii:Ui,invoke_v:Ii,invoke_vi:ki,invoke_vii:$i,invoke_viii:Li,invoke_viiidi:xi,invoke_viiifi:_i,invoke_viiii:Bi,invoke_viiiiiii:qi,invoke_viiiiiiiiii:Gi,invoke_viiiiiiiiiiiiiii:Ji};function _i(e,t,i,o,a,l){var d=Y();try{Z(e)(t,i,o,a,l)}catch(D){if(X(d),!(D instanceof R))throw D;J(1,0)}}function xi(e,t,i,o,a,l){var d=Y();try{Z(e)(t,i,o,a,l)}catch(D){if(X(d),!(D instanceof R))throw D;J(1,0)}}function Bi(e,t,i,o,a){var l=Y();try{Z(e)(t,i,o,a)}catch(d){if(X(l),!(d instanceof R))throw d;J(1,0)}}function wi(e,t,i,o){var a=Y();try{return Z(e)(t,i,o)}catch(l){if(X(a),!(l instanceof R))throw l;J(1,0)}}function Si(e,t,i){var o=Y();try{return Z(e)(t,i)}catch(a){if(X(o),!(a instanceof R))throw a;J(1,0)}}function Ti(e,t){var i=Y();try{return Z(e)(t)}catch(o){if(X(i),!(o instanceof R))throw o;J(1,0)}}function $i(e,t,i){var o=Y();try{Z(e)(t,i)}catch(a){if(X(o),!(a instanceof R))throw a;J(1,0)}}function ki(e,t){var i=Y();try{Z(e)(t)}catch(o){if(X(i),!(o instanceof R))throw o;J(1,0)}}function Ii(e){var t=Y();try{Z(e)()}catch(i){if(X(t),!(i instanceof R))throw i;J(1,0)}}function Pi(e,t,i,o,a,l,d){var D=Y();try{return Z(e)(t,i,o,a,l,d)}catch(y){if(X(D),!(y instanceof R))throw y;J(1,0)}}function Oi(e,t,i,o,a,l){var d=Y();try{return Z(e)(t,i,o,a,l)}catch(D){if(X(d),!(D instanceof R))throw D;J(1,0)}}function Li(e,t,i,o){var a=Y();try{Z(e)(t,i,o)}catch(l){if(X(a),!(l instanceof R))throw l;J(1,0)}}function Ri(e,t,i,o,a,l,d,D){var y=Y();try{return Z(e)(t,i,o,a,l,d,D)}catch(C){if(X(y),!(C instanceof R))throw C;J(1,0)}}function Mi(e,t,i,o,a,l,d,D,y,C,_){var B=Y();try{return Z(e)(t,i,o,a,l,d,D,y,C,_)}catch(S){if(X(B),!(S instanceof R))throw S;J(1,0)}}function Ni(e,t,i,o,a){var l=Y();try{return Z(e)(t,i,o,a)}catch(d){if(X(l),!(d instanceof R))throw d;J(1,0)}}function Ui(e,t,i,o,a){var l=Y();try{return Z(e)(t,i,o,a)}catch(d){if(X(l),!(d instanceof R))throw d;return J(1,0),0n}}function Wi(e,t,i,o,a,l,d,D,y,C,_,B,S){var I=Y();try{return Z(e)(t,i,o,a,l,d,D,y,C,_,B,S)}catch(H){if(X(I),!(H instanceof R))throw H;J(1,0)}}function Vi(e,t,i,o){var a=Y();try{return Z(e)(t,i,o)}catch(l){if(X(a),!(l instanceof R))throw l;J(1,0)}}function ji(e,t,i,o){var a=Y();try{return Z(e)(t,i,o)}catch(l){if(X(a),!(l instanceof R))throw l;J(1,0)}}function Hi(e){var t=Y();try{return Z(e)()}catch(i){if(X(t),!(i instanceof R))throw i;J(1,0)}}function qi(e,t,i,o,a,l,d,D){var y=Y();try{Z(e)(t,i,o,a,l,d,D)}catch(C){if(X(y),!(C instanceof R))throw C;J(1,0)}}function zi(e,t,i,o,a,l,d,D,y,C,_,B){var S=Y();try{return Z(e)(t,i,o,a,l,d,D,y,C,_,B)}catch(I){if(X(S),!(I instanceof R))throw I;J(1,0)}}function Gi(e,t,i,o,a,l,d,D,y,C,_){var B=Y();try{Z(e)(t,i,o,a,l,d,D,y,C,_)}catch(S){if(X(B),!(S instanceof R))throw S;J(1,0)}}function Ji(e,t,i,o,a,l,d,D,y,C,_,B,S,I,H,z){var re=Y();try{Z(e)(t,i,o,a,l,d,D,y,C,_,B,S,I,H,z)}catch(ne){if(X(re),!(ne instanceof R))throw ne;J(1,0)}}var an;function Xi(){Kr(),oe()}function Yi(){Xi(),Wn();function e(){b(!an),an=!0,u.calledRun=!0,!ee&&(Vn(),M?.(u),u.onRuntimeInitialized?.(),Ie("onRuntimeInitialized"),b(!u._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),jn())}u.setStatus?(u.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>u.setStatus(""),1),e()},1)):e(),ve()}var Qe;Qe=await Yn(),Yi(),ht?n=u:n=new Promise((e,t)=>{M=e,Me=t});for(const e of Object.keys(u))e in r||Object.defineProperty(r,e,{configurable:!0,get(){le(`Access to module property ('${e}') is no longer possible via the module constructor argument; Instead, use the result of the module constructor.`)}});return n}const mt=await to();mt.ComputerWord;mt.Register2;const vn=mt.Computer,ro=mt.Parser,pn=mt.ParsedType;vn.prototype.loadCodes=function(r,n=!0){this._loadCodes(r,n)};let Fe={},lr=[];function no(){if(Object.keys(Fe).length===0){Fe={magnetic_tape:0,disk:8,drum:8,card_reader:16,card_punch:17,line_printer:18,typewriter:19,paper_tape:20};for(let r=0;r<=20;++r)r<=8&&(Fe[`magnetic_tape_${r}`]=r,Fe[`disk_${8+r}`]=8+r,Fe[`drum_${8+r}`]=8+r),Fe[`device_${r}`]=r;for(const r of Object.keys(Fe))Fe[r.replaceAll("_","-")]=Fe[r];lr=["memory",...Object.keys(Fe)]}}function uo(r,n){const u=["device_16","device_18","device_19","card_reader","line_printer","typewriter","device-16","device-18","device-19","card-reader","line-printer"],s=["device_18","line_printer","device-18","line-printer"],c=new vn;c.loadCodes(r),no();for(let m of["A","X"])if(m in n){const F=c[`register${m}`](),v=n[m];typeof v=="number"?F.set(v):typeof v=="string"?F.setCharacters(v):Object.prototype.toString.call(v)==="[object Array]"&&(v.length===6?F.setBytes(v[0],v[1],v[2],v[3],v[4],v[5]):v.length===5&&F.setMergedBytes(v[0],v[1],v[2],v[3],v[4]))}for(let m of["J","I1","I2","I3","I4","I5","I6"])if(m in n){const F=c[`register${m}`](),v=n[m];typeof v=="number"?F.set(v):Object.prototype.toString.call(v)==="[object Array]"&&v.length===3&&F.setBytes(v[0],v[1],v[2])}for(const m of lr)if(m in n){const F=v=>m==="memory"?c.memoryAt(v):c.getDeviceWordAt(Fe[m],v);Object.prototype.toString.call(n[m])!=="[object Array]"&&(n[m]=[n[m]]);for(const v of n[m]){const A=v.offset??0;let $=v.values??[];if($.length!==0){if(typeof $[0]=="number")for(const[L,N]of $.entries())F(A+L).set(N);else if(typeof $=="string"||typeof $[0]=="string"){Object.prototype.toString.call($)==="[object Array]"&&($=$.join(""));for(let L=0;L<$.length;L+=5){let N=$.substring(L,L+5);N.length<5&&(N+=" ".repeat(5-N.length)),F(A+Math.floor(L/5)).setCharacters(N)}}else if(Object.prototype.toString.call($[0])==="[object Array]")for(const[L,N]of $.entries())N.length===6?F(A+L).setBytes(N[0],N[1],N[2],N[3],N[4],N[5]):F(A+L).setMergedBytes(N[0],N[1],N[2],N[3],N[4])}}}c.executeUntilHaltOrSelfLoop();let p={"program-counter":c.line(),"execution-time":c.elapsed()};for(const m of["A","X"]){const F=c[`register${m}`]();p[m]={int:F.value(),float:F.floatValue(),bytes:F.getBytesString(),text:F.getCharacters()}}for(const m of["J","I1","I2","I3","I4","I5","I6"]){const F=c[`register${m}`]();p[m]={int:F.value(),bytes:F.getBytesString()}}const g=n.outputs;if(g){for(const m of lr)if(m in g){let F=!1;Object.prototype.toString.call(g[m])!=="[object Array]"&&(F=!0,g[m]=[g[m]]);const v=A=>m==="memory"?c.memoryAt(A):c.getDeviceWordAt(Fe[m],A);p[m]=[];for(const A of g[m]){const $=A.offset??0,L=A.length??1,N=typeof A.length>"u",se=A.type??(u.includes(m)?"text":"int"),x={offset:$,type:se};if(se==="int"){x.values=[];for(let T=0;T<L;++T)x.values.push(v($+T).value())}else if(se==="text"){x.values="";const T=A["auto-wrap"]??!1;for(let w=0;w<L;++w)T&&w!==0&&w%16===0&&s.includes(m)&&(x.values+=`
`),x.values+=v($+w).getCharacters();T&&s.includes(m)&&x.values.includes(`
`)&&(x.values=x.values.split(`
`))}else if(se==="bytes"){x.values=[];for(let T=0;T<L;++T)x.values.push(v($+T).getBytesString())}else if(se==="float"){x.values=[];for(let T=0;T<L;++T)x.values.push(v($+T).floatValue())}N&&(x.value=x.values[0],delete x.values),p[m].push(x)}F&&(p[m]=p[m][0])}}return p}const de=document.querySelector("#mixal-editor"),Fn=document.querySelector("#mixal-editor-highlighted"),bn=document.querySelector("#mixal-editor-line-numbers"),ue=document.querySelector("#io-spec-editor"),En=document.querySelector("#io-spec-highlighted"),Cn=document.querySelector("#io-spec-line-numbers"),tt=document.querySelector("#results-editor"),An=document.querySelector("#results-highlighted"),_n=document.querySelector("#results-line-numbers"),io=new Set(["EQU","ORIG","CON","ALF","END"]);function et(r){return r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function oo(r){try{const n=ro.parseLine(r,"",!0);if(n.parsedType.value===pn.EMPTY.value&&n.commentSpan.start>=0)return`<span class="text-gray-500 dark:text-gray-400 italic">${et(r)}</span>`;if(n.parsedType.value===pn.EMPTY.value)return et(r);const u=[];if(n.locationSpan.start>=0&&u.push({start:n.locationSpan.start,end:n.locationSpan.end,cls:"text-purple-700 dark:text-purple-400"}),n.operationSpan.start>=0){const p=io.has(n.operation);u.push({start:n.operationSpan.start,end:n.operationSpan.end,cls:p?"text-blue-600 dark:text-blue-400 font-bold":"text-blue-700 dark:text-blue-500 font-bold"})}n.addressSpan.start>=0&&u.push({start:n.addressSpan.start,end:n.addressSpan.end,cls:"text-green-700 dark:text-green-400"}),n.indexSpan.start>=0&&u.push({start:n.indexSpan.start,end:n.indexSpan.end,cls:"text-yellow-700 dark:text-yellow-400"}),n.fieldSpan.start>=0&&u.push({start:n.fieldSpan.start,end:n.fieldSpan.end,cls:"text-orange-600 dark:text-orange-400"}),n.commentSpan.start>=0&&u.push({start:n.commentSpan.start,end:n.commentSpan.end,cls:"text-gray-500 dark:text-gray-400 italic"}),u.sort((p,g)=>p.start-g.start);let s="",c=0;for(const p of u){c<p.start&&(s+=et(r.substring(c,p.start)));const g=et(r.substring(p.start,p.end));s+=`<span class="${p.cls}">${g}</span>`,c=p.end}return c<r.length&&(s+=et(r.substring(c))),s}catch{return et(r)}}function so(r){return r.split(`
`).map(oo).join(`
`)}function xn(r,n){const u=r.value.split(`
`).length;let s="";for(let c=1;c<=u;c++)s+=c+`
`;n.textContent=s+`
`}function ao(){Fn.innerHTML=so(de.value)+`

`,xn(de,bn)}de.addEventListener("input",()=>{ao()});de.addEventListener("scroll",()=>{const r=Fn.parentElement;r.scrollTop=de.scrollTop,r.scrollLeft=de.scrollLeft,bn.scrollTop=de.scrollTop});de.addEventListener("keydown",r=>{const n=de.selectionStart,u=de.selectionEnd,s=de.value;if(r.key=="Enter"){r.preventDefault();const c=s.slice(0,n),p=s.slice(u),g=c.lastIndexOf(`
`)+1,F=c.slice(g).match(/^\S*(?:\s+)?/),v=F?F[0]:"",A=`
`+" ".repeat(v.length);de.value=c+A+p,de.selectionStart=de.selectionEnd=n+A.length,de.dispatchEvent(new Event("input"))}});function co(r){return r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/("(\\u[\da-fA-F]{4}|\\[^u]|[^\\"])*"(?:\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?)/g,u=>{let s="font-bold ";return/^"/.test(u)?s+=/:$/.test(u)?"text-blue-800 dark:text-blue-400":"text-green-700 dark:text-green-400":/true|false/.test(u)?s+="text-purple-800 dark:text-purple-400":/null/.test(u)?s+="text-gray-500 dark:text-gray-400":s+="text-yellow-600 dark:text-yellow-500",`<span class="${s}">${u}</span>`})}function Bn(r,n,u){n.innerHTML=co(r.value)+`

`,xn(r,u)}ue.addEventListener("input",()=>{Bn(ue,En,Cn)});ue.addEventListener("scroll",()=>{const r=En.parentElement;r.scrollTop=ue.scrollTop,r.scrollLeft=ue.scrollLeft,Cn.scrollTop=ue.scrollTop});function nr(r,n){r.focus(),document.execCommand("insertText",!1,n)}function ur(r,n,u,s){r.focus(),r.select(),document.execCommand("insertText",!1,n),r.selectionStart=u,r.selectionEnd=s}ue.addEventListener("keydown",r=>{const n=ue.selectionStart,u=ue.selectionEnd,s=ue.value;if(r.key=="Enter"){r.preventDefault();const c=s.slice(0,n),p=c.lastIndexOf(`
`)+1,g=c.slice(p),m=g.match(/^\s*/),F=m?m[0]:"",$=`
`+(g.trim().endsWith("{")||g.trim().endsWith("[")?F+"  ":F);nr(ue,$),ue.dispatchEvent(new Event("input"))}else if(r.key=="Tab"){r.preventDefault();const c=s.slice(0,n),p=s.slice(n,u),g=s.slice(u);if(p.includes(`
`)){const m=c.lastIndexOf(`
`)+1,F=u+(g.indexOf(`
`)===-1?g.length:g.indexOf(`
`)),v=s.slice(m,F);let A,$,L;if(r.shiftKey){A=v.replace(/^( {1,2})/gm,"");const se=v.match(/^( {1,2})/)?v.match(/^( {1,2})/)[1].length:0;$=Math.max(m,n-se),L=m+A.length-(g.indexOf(`
`)===-1?g.length:g.indexOf(`
`))}else A=v.replace(/^/gm,"  "),$=n+2,L=m+A.length-(g.indexOf(`
`)===-1?g.length:g.indexOf(`
`));const N=s.slice(0,m)+A+s.slice(F);ur(ue,N,$,L)}else if(r.shiftKey){if(c.endsWith("  ")){const m=c.slice(0,-2)+p+g;ur(ue,m,n-2,u-2)}else if(c.endsWith(" ")){const m=c.slice(0,-1)+p+g;ur(ue,m,n-1,u-1)}}else nr(ue,"  ");ue.dispatchEvent(new Event("input"))}else if(r.key=="{"||r.key=="["){r.preventDefault();const c=s.slice(0,n),p=c.lastIndexOf(`
`)+1,m=c.slice(p).match(/^\s*/),F=m?m[0]:"",v=r.key==="{"?"{}":"[]",A=v[0]+`
`+F+`  
`+F+v[1];nr(ue,A),ue.selectionStart=ue.selectionEnd=n+F.length+4,ue.dispatchEvent(new Event("input"))}});tt.addEventListener("input",()=>{Bn(tt,An,_n)});tt.addEventListener("scroll",()=>{const r=An.parentElement;r.scrollTop=tt.scrollTop,r.scrollLeft=tt.scrollLeft,_n.scrollTop=tt.scrollTop});var Dn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ir={},gn;function lo(){return gn||(gn=1,(function(r){(function(n){var u=typeof globalThis<"u"&&globalThis||typeof r<"u"&&r||typeof Dn<"u"&&Dn||{},s={searchParams:"URLSearchParams"in u,iterable:"Symbol"in u&&"iterator"in Symbol,blob:"FileReader"in u&&"Blob"in u&&(function(){try{return new Blob,!0}catch{return!1}})(),formData:"FormData"in u,arrayBuffer:"ArrayBuffer"in u};function c(f){return f&&DataView.prototype.isPrototypeOf(f)}if(s.arrayBuffer)var p=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],g=ArrayBuffer.isView||function(f){return f&&p.indexOf(Object.prototype.toString.call(f))>-1};function m(f){if(typeof f!="string"&&(f=String(f)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(f)||f==="")throw new TypeError('Invalid character in header field name: "'+f+'"');return f.toLowerCase()}function F(f){return typeof f!="string"&&(f=String(f)),f}function v(f){var E={next:function(){var P=f.shift();return{done:P===void 0,value:P}}};return s.iterable&&(E[Symbol.iterator]=function(){return E}),E}function A(f){this.map={},f instanceof A?f.forEach(function(E,P){this.append(P,E)},this):Array.isArray(f)?f.forEach(function(E){if(E.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+E.length);this.append(E[0],E[1])},this):f&&Object.getOwnPropertyNames(f).forEach(function(E){this.append(E,f[E])},this)}A.prototype.append=function(f,E){f=m(f),E=F(E);var P=this.map[f];this.map[f]=P?P+", "+E:E},A.prototype.delete=function(f){delete this.map[m(f)]},A.prototype.get=function(f){return f=m(f),this.has(f)?this.map[f]:null},A.prototype.has=function(f){return this.map.hasOwnProperty(m(f))},A.prototype.set=function(f,E){this.map[m(f)]=F(E)},A.prototype.forEach=function(f,E){for(var P in this.map)this.map.hasOwnProperty(P)&&f.call(E,this.map[P],P,this)},A.prototype.keys=function(){var f=[];return this.forEach(function(E,P){f.push(P)}),v(f)},A.prototype.values=function(){var f=[];return this.forEach(function(E){f.push(E)}),v(f)},A.prototype.entries=function(){var f=[];return this.forEach(function(E,P){f.push([P,E])}),v(f)},s.iterable&&(A.prototype[Symbol.iterator]=A.prototype.entries);function $(f){if(!f._noBody){if(f.bodyUsed)return Promise.reject(new TypeError("Already read"));f.bodyUsed=!0}}function L(f){return new Promise(function(E,P){f.onload=function(){E(f.result)},f.onerror=function(){P(f.error)}})}function N(f){var E=new FileReader,P=L(E);return E.readAsArrayBuffer(f),P}function se(f){var E=new FileReader,P=L(E),q=/charset=([A-Za-z0-9_-]+)/.exec(f.type),G=q?q[1]:"utf-8";return E.readAsText(f,G),P}function x(f){for(var E=new Uint8Array(f),P=new Array(E.length),q=0;q<E.length;q++)P[q]=String.fromCharCode(E[q]);return P.join("")}function T(f){if(f.slice)return f.slice(0);var E=new Uint8Array(f.byteLength);return E.set(new Uint8Array(f)),E.buffer}function w(){return this.bodyUsed=!1,this._initBody=function(f){this.bodyUsed=this.bodyUsed,this._bodyInit=f,f?typeof f=="string"?this._bodyText=f:s.blob&&Blob.prototype.isPrototypeOf(f)?this._bodyBlob=f:s.formData&&FormData.prototype.isPrototypeOf(f)?this._bodyFormData=f:s.searchParams&&URLSearchParams.prototype.isPrototypeOf(f)?this._bodyText=f.toString():s.arrayBuffer&&s.blob&&c(f)?(this._bodyArrayBuffer=T(f.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(f)||g(f))?this._bodyArrayBuffer=T(f):this._bodyText=f=Object.prototype.toString.call(f):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof f=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):s.searchParams&&URLSearchParams.prototype.isPrototypeOf(f)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s.blob&&(this.blob=function(){var f=$(this);if(f)return f;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var f=$(this);return f||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(s.blob)return this.blob().then(N);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var f=$(this);if(f)return f;if(this._bodyBlob)return se(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(x(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s.formData&&(this.formData=function(){return this.text().then(oe)}),this.json=function(){return this.text().then(JSON.parse)},this}var ee=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function b(f){var E=f.toUpperCase();return ee.indexOf(E)>-1?E:f}function W(f,E){if(!(this instanceof W))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');E=E||{};var P=E.body;if(f instanceof W){if(f.bodyUsed)throw new TypeError("Already read");this.url=f.url,this.credentials=f.credentials,E.headers||(this.headers=new A(f.headers)),this.method=f.method,this.mode=f.mode,this.signal=f.signal,!P&&f._bodyInit!=null&&(P=f._bodyInit,f.bodyUsed=!0)}else this.url=String(f);if(this.credentials=E.credentials||this.credentials||"same-origin",(E.headers||!this.headers)&&(this.headers=new A(E.headers)),this.method=b(E.method||this.method||"GET"),this.mode=E.mode||this.mode||null,this.signal=E.signal||this.signal||(function(){if("AbortController"in u){var M=new AbortController;return M.signal}})(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&P)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(P),(this.method==="GET"||this.method==="HEAD")&&(E.cache==="no-store"||E.cache==="no-cache")){var q=/([?&])_=[^&]*/;if(q.test(this.url))this.url=this.url.replace(q,"$1_="+new Date().getTime());else{var G=/\?/;this.url+=(G.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}W.prototype.clone=function(){return new W(this,{body:this._bodyInit})};function oe(f){var E=new FormData;return f.trim().split("&").forEach(function(P){if(P){var q=P.split("="),G=q.shift().replace(/\+/g," "),M=q.join("=").replace(/\+/g," ");E.append(decodeURIComponent(G),decodeURIComponent(M))}}),E}function ve(f){var E=new A,P=f.replace(/\r?\n[\t ]+/g," ");return P.split("\r").map(function(q){return q.indexOf(`
`)===0?q.substr(1,q.length):q}).forEach(function(q){var G=q.split(":"),M=G.shift().trim();if(M){var Me=G.join(":").trim();try{E.append(M,Me)}catch(De){console.warn("Response "+De.message)}}}),E}w.call(W.prototype);function R(f,E){if(!(this instanceof R))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(E||(E={}),this.type="default",this.status=E.status===void 0?200:E.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=E.statusText===void 0?"":""+E.statusText,this.headers=new A(E.headers),this.url=E.url||"",this._initBody(f)}w.call(R.prototype),R.prototype.clone=function(){return new R(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new A(this.headers),url:this.url})},R.error=function(){var f=new R(null,{status:200,statusText:""});return f.ok=!1,f.status=0,f.type="error",f};var ze=[301,302,303,307,308];R.redirect=function(f,E){if(ze.indexOf(E)===-1)throw new RangeError("Invalid status code");return new R(null,{status:E,headers:{location:f}})},n.DOMException=u.DOMException;try{new n.DOMException}catch{n.DOMException=function(E,P){this.message=E,this.name=P;var q=Error(E);this.stack=q.stack},n.DOMException.prototype=Object.create(Error.prototype),n.DOMException.prototype.constructor=n.DOMException}function Ie(f,E){return new Promise(function(P,q){var G=new W(f,E);if(G.signal&&G.signal.aborted)return q(new n.DOMException("Aborted","AbortError"));var M=new XMLHttpRequest;function Me(){M.abort()}M.onload=function(){var te={statusText:M.statusText,headers:ve(M.getAllResponseHeaders()||"")};G.url.indexOf("file://")===0&&(M.status<200||M.status>599)?te.status=200:te.status=M.status,te.url="responseURL"in M?M.responseURL:te.headers.get("X-Request-URL");var pe="response"in M?M.response:M.responseText;setTimeout(function(){P(new R(pe,te))},0)},M.onerror=function(){setTimeout(function(){q(new TypeError("Network request failed"))},0)},M.ontimeout=function(){setTimeout(function(){q(new TypeError("Network request timed out"))},0)},M.onabort=function(){setTimeout(function(){q(new n.DOMException("Aborted","AbortError"))},0)};function De(te){try{return te===""&&u.location.href?u.location.href:te}catch{return te}}if(M.open(G.method,De(G.url),!0),G.credentials==="include"?M.withCredentials=!0:G.credentials==="omit"&&(M.withCredentials=!1),"responseType"in M&&(s.blob?M.responseType="blob":s.arrayBuffer&&(M.responseType="arraybuffer")),E&&typeof E.headers=="object"&&!(E.headers instanceof A||u.Headers&&E.headers instanceof u.Headers)){var ge=[];Object.getOwnPropertyNames(E.headers).forEach(function(te){ge.push(m(te)),M.setRequestHeader(te,F(E.headers[te]))}),G.headers.forEach(function(te,pe){ge.indexOf(pe)===-1&&M.setRequestHeader(pe,te)})}else G.headers.forEach(function(te,pe){M.setRequestHeader(pe,te)});G.signal&&(G.signal.addEventListener("abort",Me),M.onreadystatechange=function(){M.readyState===4&&G.signal.removeEventListener("abort",Me)}),M.send(typeof G._bodyInit>"u"?null:G._bodyInit)})}return Ie.polyfill=!0,u.fetch||(u.fetch=Ie,u.Headers=A,u.Request=W,u.Response=R),n.Headers=A,n.Request=W,n.Response=R,n.fetch=Ie,n})({})})(typeof self<"u"?self:ir)),ir}lo();const dt=document.querySelector("#mixal-editor"),ft=document.querySelector("#io-spec-editor");async function fo(){const r=window.location.search,n=new URLSearchParams(r);if(n.has("example")){const s=n.get("example"),c=await fetch(`/MIXAL/examples/${s}.mix`);c.ok&&(dt.value=await c.text(),dt.dispatchEvent(new Event("input")));const p=await fetch(`/MIXAL/examples/${s}.json`);if(p.ok&&(ft.value=await p.text(),ft.dispatchEvent(new Event("input"))),c.ok&&p.ok)return}const u=window.location.hash.replace(/^#/,"");if(u.length!=0){const s=JSON.parse(decodeURIComponent(Array.from(atob(u)).map(c=>`%${c.charCodeAt(0).toString(16).padStart(2,"0")}`).join("")));dt.value=s.code,dt.dispatchEvent(new Event("input")),ft.value=s.io,ft.dispatchEvent(new Event("input"))}}function po(r){const n=new URL(r);return n.search="",n.toString()}function Do(){const r={code:dt.value,io:ft.value},n=btoa(encodeURIComponent(JSON.stringify(r)).replace(/%([0-9A-F]{2})/g,(u,s)=>String.fromCharCode(parseInt(s,16))));window.history.replaceState(null,"",po(window.location.href)),window.location.hash=`#${n}`}var go=/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,yo=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,mo=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/,or={Space_Separator:go,ID_Start:yo,ID_Continue:mo},ie={isSpaceSeparator(r){return typeof r=="string"&&or.Space_Separator.test(r)},isIdStartChar(r){return typeof r=="string"&&(r>="a"&&r<="z"||r>="A"&&r<="Z"||r==="$"||r==="_"||or.ID_Start.test(r))},isIdContinueChar(r){return typeof r=="string"&&(r>="a"&&r<="z"||r>="A"&&r<="Z"||r>="0"&&r<="9"||r==="$"||r==="_"||r===""||r===""||or.ID_Continue.test(r))},isDigit(r){return typeof r=="string"&&/[0-9]/.test(r)},isHexDigit(r){return typeof r=="string"&&/[0-9A-Fa-f]/.test(r)}};let dr,fe,$e,It,Le,Ce,ce,vr,Dt;var ho=function(n,u){dr=String(n),fe="start",$e=[],It=0,Le=1,Ce=0,ce=void 0,vr=void 0,Dt=void 0;do ce=vo(),Eo[fe]();while(ce.type!=="eof");return typeof u=="function"?fr({"":Dt},"",u):Dt};function fr(r,n,u){const s=r[n];if(s!=null&&typeof s=="object")if(Array.isArray(s))for(let c=0;c<s.length;c++){const p=String(c),g=fr(s,p,u);g===void 0?delete s[p]:Object.defineProperty(s,p,{value:g,writable:!0,enumerable:!0,configurable:!0})}else for(const c in s){const p=fr(s,c,u);p===void 0?delete s[c]:Object.defineProperty(s,c,{value:p,writable:!0,enumerable:!0,configurable:!0})}return u.call(r,n,s)}let O,k,pt,Te,U;function vo(){for(O="default",k="",pt=!1,Te=1;;){U=ke();const r=wn[O]();if(r)return r}}function ke(){if(dr[It])return String.fromCodePoint(dr.codePointAt(It))}function h(){const r=ke();return r===`
`?(Le++,Ce=0):r?Ce+=r.length:Ce++,r&&(It+=r.length),r}const wn={default(){switch(U){case"	":case"\v":case"\f":case" ":case"":case"\uFEFF":case`
`:case"\r":case"\u2028":case"\u2029":h();return;case"/":h(),O="comment";return;case void 0:return h(),K("eof")}if(ie.isSpaceSeparator(U)){h();return}return wn[fe]()},comment(){switch(U){case"*":h(),O="multiLineComment";return;case"/":h(),O="singleLineComment";return}throw Q(h())},multiLineComment(){switch(U){case"*":h(),O="multiLineCommentAsterisk";return;case void 0:throw Q(h())}h()},multiLineCommentAsterisk(){switch(U){case"*":h();return;case"/":h(),O="default";return;case void 0:throw Q(h())}h(),O="multiLineComment"},singleLineComment(){switch(U){case`
`:case"\r":case"\u2028":case"\u2029":h(),O="default";return;case void 0:return h(),K("eof")}h()},value(){switch(U){case"{":case"[":return K("punctuator",h());case"n":return h(),We("ull"),K("null",null);case"t":return h(),We("rue"),K("boolean",!0);case"f":return h(),We("alse"),K("boolean",!1);case"-":case"+":h()==="-"&&(Te=-1),O="sign";return;case".":k=h(),O="decimalPointLeading";return;case"0":k=h(),O="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":k=h(),O="decimalInteger";return;case"I":return h(),We("nfinity"),K("numeric",1/0);case"N":return h(),We("aN"),K("numeric",NaN);case'"':case"'":pt=h()==='"',k="",O="string";return}throw Q(h())},identifierNameStartEscape(){if(U!=="u")throw Q(h());h();const r=pr();switch(r){case"$":case"_":break;default:if(!ie.isIdStartChar(r))throw yn();break}k+=r,O="identifierName"},identifierName(){switch(U){case"$":case"_":case"":case"":k+=h();return;case"\\":h(),O="identifierNameEscape";return}if(ie.isIdContinueChar(U)){k+=h();return}return K("identifier",k)},identifierNameEscape(){if(U!=="u")throw Q(h());h();const r=pr();switch(r){case"$":case"_":case"":case"":break;default:if(!ie.isIdContinueChar(r))throw yn();break}k+=r,O="identifierName"},sign(){switch(U){case".":k=h(),O="decimalPointLeading";return;case"0":k=h(),O="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":k=h(),O="decimalInteger";return;case"I":return h(),We("nfinity"),K("numeric",Te*(1/0));case"N":return h(),We("aN"),K("numeric",NaN)}throw Q(h())},zero(){switch(U){case".":k+=h(),O="decimalPoint";return;case"e":case"E":k+=h(),O="decimalExponent";return;case"x":case"X":k+=h(),O="hexadecimal";return}return K("numeric",Te*0)},decimalInteger(){switch(U){case".":k+=h(),O="decimalPoint";return;case"e":case"E":k+=h(),O="decimalExponent";return}if(ie.isDigit(U)){k+=h();return}return K("numeric",Te*Number(k))},decimalPointLeading(){if(ie.isDigit(U)){k+=h(),O="decimalFraction";return}throw Q(h())},decimalPoint(){switch(U){case"e":case"E":k+=h(),O="decimalExponent";return}if(ie.isDigit(U)){k+=h(),O="decimalFraction";return}return K("numeric",Te*Number(k))},decimalFraction(){switch(U){case"e":case"E":k+=h(),O="decimalExponent";return}if(ie.isDigit(U)){k+=h();return}return K("numeric",Te*Number(k))},decimalExponent(){switch(U){case"+":case"-":k+=h(),O="decimalExponentSign";return}if(ie.isDigit(U)){k+=h(),O="decimalExponentInteger";return}throw Q(h())},decimalExponentSign(){if(ie.isDigit(U)){k+=h(),O="decimalExponentInteger";return}throw Q(h())},decimalExponentInteger(){if(ie.isDigit(U)){k+=h();return}return K("numeric",Te*Number(k))},hexadecimal(){if(ie.isHexDigit(U)){k+=h(),O="hexadecimalInteger";return}throw Q(h())},hexadecimalInteger(){if(ie.isHexDigit(U)){k+=h();return}return K("numeric",Te*Number(k))},string(){switch(U){case"\\":h(),k+=Fo();return;case'"':if(pt)return h(),K("string",k);k+=h();return;case"'":if(!pt)return h(),K("string",k);k+=h();return;case`
`:case"\r":throw Q(h());case"\u2028":case"\u2029":Co(U);break;case void 0:throw Q(h())}k+=h()},start(){switch(U){case"{":case"[":return K("punctuator",h())}O="value"},beforePropertyName(){switch(U){case"$":case"_":k=h(),O="identifierName";return;case"\\":h(),O="identifierNameStartEscape";return;case"}":return K("punctuator",h());case'"':case"'":pt=h()==='"',O="string";return}if(ie.isIdStartChar(U)){k+=h(),O="identifierName";return}throw Q(h())},afterPropertyName(){if(U===":")return K("punctuator",h());throw Q(h())},beforePropertyValue(){O="value"},afterPropertyValue(){switch(U){case",":case"}":return K("punctuator",h())}throw Q(h())},beforeArrayValue(){if(U==="]")return K("punctuator",h());O="value"},afterArrayValue(){switch(U){case",":case"]":return K("punctuator",h())}throw Q(h())},end(){throw Q(h())}};function K(r,n){return{type:r,value:n,line:Le,column:Ce}}function We(r){for(const n of r){if(ke()!==n)throw Q(h());h()}}function Fo(){switch(ke()){case"b":return h(),"\b";case"f":return h(),"\f";case"n":return h(),`
`;case"r":return h(),"\r";case"t":return h(),"	";case"v":return h(),"\v";case"0":if(h(),ie.isDigit(ke()))throw Q(h());return"\0";case"x":return h(),bo();case"u":return h(),pr();case`
`:case"\u2028":case"\u2029":return h(),"";case"\r":return h(),ke()===`
`&&h(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":throw Q(h());case void 0:throw Q(h())}return h()}function bo(){let r="",n=ke();if(!ie.isHexDigit(n)||(r+=h(),n=ke(),!ie.isHexDigit(n)))throw Q(h());return r+=h(),String.fromCodePoint(parseInt(r,16))}function pr(){let r="",n=4;for(;n-- >0;){const u=ke();if(!ie.isHexDigit(u))throw Q(h());r+=h()}return String.fromCodePoint(parseInt(r,16))}const Eo={start(){if(ce.type==="eof")throw Ve();sr()},beforePropertyName(){switch(ce.type){case"identifier":case"string":vr=ce.value,fe="afterPropertyName";return;case"punctuator":$t();return;case"eof":throw Ve()}},afterPropertyName(){if(ce.type==="eof")throw Ve();fe="beforePropertyValue"},beforePropertyValue(){if(ce.type==="eof")throw Ve();sr()},beforeArrayValue(){if(ce.type==="eof")throw Ve();if(ce.type==="punctuator"&&ce.value==="]"){$t();return}sr()},afterPropertyValue(){if(ce.type==="eof")throw Ve();switch(ce.value){case",":fe="beforePropertyName";return;case"}":$t()}},afterArrayValue(){if(ce.type==="eof")throw Ve();switch(ce.value){case",":fe="beforeArrayValue";return;case"]":$t()}},end(){}};function sr(){let r;switch(ce.type){case"punctuator":switch(ce.value){case"{":r={};break;case"[":r=[];break}break;case"null":case"boolean":case"numeric":case"string":r=ce.value;break}if(Dt===void 0)Dt=r;else{const n=$e[$e.length-1];Array.isArray(n)?n.push(r):Object.defineProperty(n,vr,{value:r,writable:!0,enumerable:!0,configurable:!0})}if(r!==null&&typeof r=="object")$e.push(r),Array.isArray(r)?fe="beforeArrayValue":fe="beforePropertyName";else{const n=$e[$e.length-1];n==null?fe="end":Array.isArray(n)?fe="afterArrayValue":fe="afterPropertyValue"}}function $t(){$e.pop();const r=$e[$e.length-1];r==null?fe="end":Array.isArray(r)?fe="afterArrayValue":fe="afterPropertyValue"}function Q(r){return Pt(r===void 0?`JSON5: invalid end of input at ${Le}:${Ce}`:`JSON5: invalid character '${Sn(r)}' at ${Le}:${Ce}`)}function Ve(){return Pt(`JSON5: invalid end of input at ${Le}:${Ce}`)}function yn(){return Ce-=5,Pt(`JSON5: invalid identifier character at ${Le}:${Ce}`)}function Co(r){console.warn(`JSON5: '${Sn(r)}' in strings is not valid ECMAScript; consider escaping`)}function Sn(r){const n={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(n[r])return n[r];if(r<" "){const u=r.charCodeAt(0).toString(16);return"\\x"+("00"+u).substring(u.length)}return r}function Pt(r){const n=new SyntaxError(r);return n.lineNumber=Le,n.columnNumber=Ce,n}var Ao=function(n,u,s){const c=[];let p="",g,m,F="",v;if(u!=null&&typeof u=="object"&&!Array.isArray(u)&&(s=u.space,v=u.quote,u=u.replacer),typeof u=="function")m=u;else if(Array.isArray(u)){g=[];for(const x of u){let T;typeof x=="string"?T=x:(typeof x=="number"||x instanceof String||x instanceof Number)&&(T=String(x)),T!==void 0&&g.indexOf(T)<0&&g.push(T)}}return s instanceof Number?s=Number(s):s instanceof String&&(s=String(s)),typeof s=="number"?s>0&&(s=Math.min(10,Math.floor(s)),F="          ".substr(0,s)):typeof s=="string"&&(F=s.substr(0,10)),A("",{"":n});function A(x,T){let w=T[x];switch(w!=null&&(typeof w.toJSON5=="function"?w=w.toJSON5(x):typeof w.toJSON=="function"&&(w=w.toJSON(x))),m&&(w=m.call(T,x,w)),w instanceof Number?w=Number(w):w instanceof String?w=String(w):w instanceof Boolean&&(w=w.valueOf()),w){case null:return"null";case!0:return"true";case!1:return"false"}if(typeof w=="string")return $(w);if(typeof w=="number")return String(w);if(typeof w=="object")return Array.isArray(w)?se(w):L(w)}function $(x){const T={"'":.1,'"':.2},w={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};let ee="";for(let W=0;W<x.length;W++){const oe=x[W];switch(oe){case"'":case'"':T[oe]++,ee+=oe;continue;case"\0":if(ie.isDigit(x[W+1])){ee+="\\x00";continue}}if(w[oe]){ee+=w[oe];continue}if(oe<" "){let ve=oe.charCodeAt(0).toString(16);ee+="\\x"+("00"+ve).substring(ve.length);continue}ee+=oe}const b=v||Object.keys(T).reduce((W,oe)=>T[W]<T[oe]?W:oe);return ee=ee.replace(new RegExp(b,"g"),w[b]),b+ee+b}function L(x){if(c.indexOf(x)>=0)throw TypeError("Converting circular structure to JSON5");c.push(x);let T=p;p=p+F;let w=g||Object.keys(x),ee=[];for(const W of w){const oe=A(W,x);if(oe!==void 0){let ve=N(W)+":";F!==""&&(ve+=" "),ve+=oe,ee.push(ve)}}let b;if(ee.length===0)b="{}";else{let W;if(F==="")W=ee.join(","),b="{"+W+"}";else{let oe=`,
`+p;W=ee.join(oe),b=`{
`+p+W+`,
`+T+"}"}}return c.pop(),p=T,b}function N(x){if(x.length===0)return $(x);const T=String.fromCodePoint(x.codePointAt(0));if(!ie.isIdStartChar(T))return $(x);for(let w=T.length;w<x.length;w++)if(!ie.isIdContinueChar(String.fromCodePoint(x.codePointAt(w))))return $(x);return x}function se(x){if(c.indexOf(x)>=0)throw TypeError("Converting circular structure to JSON5");c.push(x);let T=p;p=p+F;let w=[];for(let b=0;b<x.length;b++){const W=A(String(b),x);w.push(W!==void 0?W:"null")}let ee;if(w.length===0)ee="[]";else if(F==="")ee="["+w.join(",")+"]";else{let b=`,
`+p,W=w.join(b);ee=`[
`+p+W+`,
`+T+"]"}return c.pop(),p=T,ee}};const _o={parse:ho,stringify:Ao};var qe=_o;const Dr=document.querySelector("#io-spec-editor"),Tn=document.querySelector("#results-editor");function gr(){return{type:"int",intValue:"0",sign:"+",bytes:["0","0","0","0","0"],addr:"0",mergedBytes:["0","0","0"]}}function Pe(){return{type:"int",intValue:"0",sign:"+",bytes:["0","0"]}}function $n(){return{A:gr(),X:gr(),I1:Pe(),I2:Pe(),I3:Pe(),I4:Pe(),I5:Pe(),I6:Pe(),J:Pe()}}function kn(){try{return qe.parse(Dr.value)||{}}catch{return{}}}function xo(r){const n=gr();return typeof r=="number"?(n.type="int",n.intValue=String(r)):typeof r=="string"?(n.type="text",n.intValue=r):Array.isArray(r)&&(r.length===6?(n.type="bytes",n.sign=r[0]==="-"?"-":"+",n.bytes=r.slice(1).map(String)):r.length===5&&(n.type="merged-bytes",n.sign=r[0]==="-"?"-":"+",n.addr=String(r[1]),n.mergedBytes=r.slice(2).map(String))),n}function Bo(r){const n=Pe();return typeof r=="number"?(n.type="int",n.intValue=String(r)):Array.isArray(r)&&r.length===3&&(n.type="bytes",n.sign=r[0]==="-"?"-":"+",n.bytes=r.slice(1).map(String)),n}function wo(){const r=$n(),n=kn();for(const u of["A","X"])u in n&&(r[u]=xo(n[u]));for(const u of["I1","I2","I3","I4","I5","I6","J"])u in n&&(r[u]=Bo(n[u]));return r}function So(r){if(r.type==="int"){const n=parseInt(r.intValue,10);return isNaN(n)?0:n}if(r.type==="text")return r.intValue;if(r.type==="bytes")return[r.sign,...r.bytes.map(n=>{const u=parseInt(n,10);return isNaN(u)?0:u})];if(r.type==="merged-bytes"){const n=parseInt(r.addr,10);return[r.sign,isNaN(n)?0:n,...r.mergedBytes.map(u=>{const s=parseInt(u,10);return isNaN(s)?0:s})]}return 0}function To(r){if(r.type==="int"){const n=parseInt(r.intValue,10);return isNaN(n)?0:n}return r.type==="bytes"?[r.sign,...r.bytes.map(n=>{const u=parseInt(n,10);return isNaN(u)?0:u})]:0}function $o(r){if(r.type==="int")return parseInt(r.intValue,10)===0||r.intValue.trim()==="";if(r.type==="text")return r.intValue.trim()===""||r.intValue==="     ";if(r.type==="bytes")return r.bytes.every(n=>parseInt(n,10)===0||n.trim()==="");if(r.type==="merged-bytes"){const n=parseInt(r.addr,10)===0||r.addr.trim()==="",u=r.mergedBytes.every(s=>parseInt(s,10)===0||s.trim()==="");return n&&u}return!0}function ko(r){return r.type==="int"?parseInt(r.intValue,10)===0||r.intValue.trim()==="":r.type==="bytes"?r.bytes.every(n=>parseInt(n,10)===0||n.trim()===""):!0}function Io(r){const n=kn();for(const u of["A","X"]){const s=r[u];$o(s)?delete n[u]:n[u]=So(s)}for(const u of["I1","I2","I3","I4","I5","I6","J"]){const s=r[u];ko(s)?delete n[u]:n[u]=To(s)}Dr.value=JSON.stringify(n,null,2),Dr.dispatchEvent(new Event("input",{bubbles:!0}))}function Po(){try{const r=qe.parse(Tn.value)||{},n={};for(const u of["A","X","I1","I2","I3","I4","I5","I6","J"])u in r&&(n[u]=r[u]);return n}catch{return{}}}function In(r,n){const u=document.getElementById(`reg-${r}-input-int`),s=document.getElementById(`reg-${r}-input-text`),c=document.getElementById(`reg-${r}-input-bytes`),p=document.getElementById(`reg-${r}-input-merged`);u.classList.add("hidden"),s.classList.add("hidden"),c.classList.add("hidden"),p.classList.add("hidden"),n==="int"?u.classList.remove("hidden"):n==="text"?s.classList.remove("hidden"):n==="bytes"?c.classList.remove("hidden"):n==="merged-bytes"&&p.classList.remove("hidden")}function Pn(r,n){const u=document.getElementById(`reg-${r}-input-int`),s=document.getElementById(`reg-${r}-input-bytes`);u.classList.add("hidden"),s.classList.add("hidden"),n==="int"?u.classList.remove("hidden"):n==="bytes"&&s.classList.remove("hidden")}function Oo(r){const n=document.getElementById(`reg-${r}-type`),u=document.getElementById(`reg-${r}-value`),s=document.getElementById(`reg-${r}-text`),c=document.getElementById(`reg-${r}-sign`),p=document.getElementById(`reg-${r}-sign-m`),g=document.getElementById(`reg-${r}-addr`),m=n.value;return{type:m,intValue:m==="text"?s.value:u.value,sign:m==="merged-bytes"?p.value:c.value,bytes:[1,2,3,4,5].map(v=>document.getElementById(`reg-${r}-b${v}`).value),addr:g.value,mergedBytes:[3,4,5].map(v=>document.getElementById(`reg-${r}-b${v}m`).value)}}function Lo(r){const n=document.getElementById(`reg-${r}-type`),u=document.getElementById(`reg-${r}-value`),s=document.getElementById(`reg-${r}-sign`);return{type:n.value,intValue:u.value,sign:s.value,bytes:[1,2].map(g=>document.getElementById(`reg-${r}-b${g}`).value)}}function Ro(r,n){const u=document.getElementById(`reg-${r}-type`),s=document.getElementById(`reg-${r}-value`),c=document.getElementById(`reg-${r}-text`),p=document.getElementById(`reg-${r}-sign`),g=document.getElementById(`reg-${r}-sign-m`),m=document.getElementById(`reg-${r}-addr`);u.value=n.type,n.type==="text"?c.value=n.intValue:s.value=n.intValue,p.value=n.sign,g.value=n.sign,m.value=n.addr;for(let F=0;F<5;F++){const v=document.getElementById(`reg-${r}-b${F+1}`);v.value=n.bytes[F]||"0"}for(let F=0;F<3;F++){const v=document.getElementById(`reg-${r}-b${F+3}m`);v.value=n.mergedBytes[F]||"0"}In(r,n.type)}function Mo(r,n){const u=document.getElementById(`reg-${r}-type`),s=document.getElementById(`reg-${r}-value`),c=document.getElementById(`reg-${r}-sign`);u.value=n.type,s.value=n.intValue,c.value=n.sign;for(let p=0;p<2;p++){const g=document.getElementById(`reg-${r}-b${p+1}`);g.value=n.bytes[p]||"0"}Pn(r,n.type)}function No(){const r=wo();for(const n of["A","X"])Ro(n,r[n]);for(const n of["I1","I2","I3","I4","I5","I6","J"])Mo(n,r[n])}function Uo(){const r=$n();for(const n of["A","X"])r[n]=Oo(n);for(const n of["I1","I2","I3","I4","I5","I6","J"])r[n]=Lo(n);Io(r)}function On(){const r=Po();for(const n of["A","X"]){const u=document.getElementById(`result-${n}-int`),s=document.getElementById(`result-${n}-float`),c=document.getElementById(`result-${n}-bytes`),p=document.getElementById(`result-${n}-text`);r[n]?(u.textContent=String(r[n].int??""),s.textContent=String(r[n].float??""),c.textContent=r[n].bytes??"",p.textContent=r[n].text??""):(u.textContent="",s.textContent="",c.textContent="",p.textContent="")}for(const n of["I1","I2","I3","I4","I5","I6","J"]){const u=document.getElementById(`result-${n}-int`),s=document.getElementById(`result-${n}-bytes`);r[n]?(u.textContent=String(r[n].int??""),s.textContent=r[n].bytes??""):(u.textContent="",s.textContent="")}}function Wo(){No(),On()}function Vo(){Uo()}function jo(){const r=document.getElementById("panel-registers");for(const n of["A","X"]){const u=document.getElementById(`reg-${n}-type`);u.addEventListener("change",()=>{In(n,u.value)})}for(const n of["I1","I2","I3","I4","I5","I6","J"]){const u=document.getElementById(`reg-${n}-type`);u.addEventListener("change",()=>{Pn(n,u.value)})}Tn.addEventListener("input",()=>{r.classList.contains("hidden")||On()})}const je=[{value:"magnetic-tape-0",label:"Magnetic Tape 0",isText:!1},{value:"magnetic-tape-1",label:"Magnetic Tape 1",isText:!1},{value:"magnetic-tape-2",label:"Magnetic Tape 2",isText:!1},{value:"magnetic-tape-3",label:"Magnetic Tape 3",isText:!1},{value:"magnetic-tape-4",label:"Magnetic Tape 4",isText:!1},{value:"magnetic-tape-5",label:"Magnetic Tape 5",isText:!1},{value:"magnetic-tape-6",label:"Magnetic Tape 6",isText:!1},{value:"magnetic-tape-7",label:"Magnetic Tape 7",isText:!1},{value:"disk-8",label:"Disk 8",isText:!1},{value:"disk-9",label:"Disk 9",isText:!1},{value:"disk-10",label:"Disk 10",isText:!1},{value:"disk-11",label:"Disk 11",isText:!1},{value:"disk-12",label:"Disk 12",isText:!1},{value:"disk-13",label:"Disk 13",isText:!1},{value:"disk-14",label:"Disk 14",isText:!1},{value:"disk-15",label:"Disk 15",isText:!1},{value:"card-reader",label:"Card Reader (16)",isText:!0},{value:"card-punch",label:"Card Punch (17)",isText:!1},{value:"line-printer",label:"Line Printer (18)",isText:!0},{value:"typewriter",label:"Typewriter (19)",isText:!0},{value:"paper-tape",label:"Paper Tape (20)",isText:!1}],Ho=["card-reader","line-printer","typewriter"],yr=document.querySelector("#io-spec-editor"),Ln=document.querySelector("#results-editor");let Oe=[],He=[],qo=0;function Ot(){return`dev-${++qo}`}function Mt(r){return Ho.includes(r)}function nt(){return{type:"int",intValue:"0",sign:"+",bytes:["0","0","0","0","0"],addr:"0",mergedBytes:["0","0","0"]}}function Fr(){try{return qe.parse(yr.value)||{}}catch{return{}}}function zo(r){const n=nt();return typeof r=="number"?(n.type="int",n.intValue=String(r)):typeof r=="string"?(n.type="text",n.intValue=r):Array.isArray(r)&&(r.length===6?(n.type="bytes",n.sign=r[0]==="-"?"-":"+",n.bytes=r.slice(1).map(String)):r.length===5&&(n.type="merged-bytes",n.sign=r[0]==="-"?"-":"+",n.addr=String(r[1]),n.mergedBytes=r.slice(2).map(String))),n}function Go(){const r=Fr(),n=[];for(const u of je){const s=u.value;if(s in r){let c=r[s];Array.isArray(c)||(c=[c]);for(const p of c){const g=Mt(s),m={id:Ot(),device:s,offset:String(p.offset??0),isTextDevice:g,textValue:"",words:[]},F=p.values;if(g)typeof F=="string"?m.textValue=F:Array.isArray(F)&&F.every(v=>typeof v=="string")?m.textValue=F.join(`
`):Array.isArray(F)&&(m.textValue=F.join(""));else{if(Array.isArray(F))if(typeof F[0]=="string"&&F.every(v=>typeof v=="string"))for(const v of F){const A=nt();A.type="text",A.intValue=v,m.words.push(A)}else for(const v of F)m.words.push(zo(v));else if(typeof F=="string")for(let v=0;v<F.length;v+=5){const A=nt();A.type="text",A.intValue=F.substring(v,v+5),m.words.push(A)}m.words.length===0&&m.words.push(nt())}n.push(m)}}}return n}function Jo(){const r=Fr(),n=[];if("outputs"in r&&r.outputs&&typeof r.outputs=="object"){const u=r.outputs;for(const s of je){const c=s.value;if(c in u){let p=u[c];Array.isArray(p)||(p=[p]);for(const g of p)n.push({id:Ot(),device:c,offset:String(g.offset??0),length:String(g.length??1),type:g.type??(Mt(c)?"text":"int")})}}}return n}function Xo(r){if(r.type==="int"){const n=parseInt(r.intValue,10);return isNaN(n)?0:n}if(r.type==="text")return r.intValue;if(r.type==="bytes")return[r.sign,...r.bytes.map(n=>{const u=parseInt(n,10);return isNaN(u)?0:u})];if(r.type==="merged-bytes"){const n=parseInt(r.addr,10);return[r.sign,isNaN(n)?0:n,...r.mergedBytes.map(u=>{const s=parseInt(u,10);return isNaN(s)?0:s})]}return 0}function Yo(){const r=Fr();for(const c of je)delete r[c.value];const n={};for(const c of Oe){n[c.device]||(n[c.device]=[]);const p=parseInt(c.offset,10)||0;let g;c.isTextDevice?g=c.textValue:g=c.words.map(Xo),n[c.device].push({offset:p,values:g})}for(const[c,p]of Object.entries(n))r[c]=p.length===1?p[0]:p;r.outputs||(r.outputs={});const u=r.outputs;for(const c of je)delete u[c.value];const s={};for(const c of He)s[c.device]||(s[c.device]=[]),s[c.device].push({offset:parseInt(c.offset,10)||0,length:parseInt(c.length,10)||1,type:c.type});for(const[c,p]of Object.entries(s))u[c]=p.length===1?p[0]:p;Object.keys(u).length===0&&delete r.outputs,yr.value=JSON.stringify(r,null,2),yr.dispatchEvent(new Event("input",{bubbles:!0}))}function Zo(r,n,u){const s=`${r}-w${n}`;return`
    <div class="flex items-center gap-1 p-2 bg-gray-50 dark:bg-gray-800 rounded" data-word-index="${n}">
      <select id="${s}-type" class="w-24 px-1 py-1 text-xs border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700">
        <option value="int" ${u.type==="int"?"selected":""}>Integer</option>
        <option value="text" ${u.type==="text"?"selected":""}>Text</option>
        <option value="bytes" ${u.type==="bytes"?"selected":""}>Bytes</option>
        <option value="merged-bytes" ${u.type==="merged-bytes"?"selected":""}>Addr&Bytes</option>
      </select>
      <div id="${s}-input-int" class="flex-1 flex gap-1 ${u.type==="int"?"":"hidden"}">
        <input id="${s}-value" type="number" min="-1073741823" max="1073741823" value="${u.intValue}" class="flex-1 px-1 py-1 text-xs font-mono border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700">
      </div>
      <div id="${s}-input-text" class="flex-1 flex gap-1 ${u.type==="text"?"":"hidden"}">
        <input id="${s}-text" type="text" maxlength="5" value="${u.type==="text"?u.intValue:""}" placeholder="ABCDE" class="flex-1 px-1 py-1 text-xs font-mono border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700">
      </div>
      <div id="${s}-input-bytes" class="flex-1 flex gap-1 ${u.type==="bytes"?"":"hidden"}">
        <select id="${s}-sign" class="w-10 px-1 py-1 text-xs font-mono border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700">
          <option value="+" ${u.sign==="+"?"selected":""}>+</option>
          <option value="-" ${u.sign==="-"?"selected":""}>-</option>
        </select>
        ${[0,1,2,3,4].map(c=>`<input id="${s}-b${c+1}" type="number" min="0" max="63" value="${u.bytes[c]}" class="w-10 px-1 py-1 text-xs font-mono border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-center">`).join("")}
      </div>
      <div id="${s}-input-merged" class="flex-1 flex gap-1 ${u.type==="merged-bytes"?"":"hidden"}">
        <select id="${s}-sign-m" class="w-10 px-1 py-1 text-xs font-mono border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700">
          <option value="+" ${u.sign==="+"?"selected":""}>+</option>
          <option value="-" ${u.sign==="-"?"selected":""}>-</option>
        </select>
        <input id="${s}-addr" type="number" min="0" max="4095" value="${u.addr}" class="w-14 px-1 py-1 text-xs font-mono border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-center">
        ${[0,1,2].map(c=>`<input id="${s}-b${c+3}m" type="number" min="0" max="63" value="${u.mergedBytes[c]}" class="w-10 px-1 py-1 text-xs font-mono border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-center">`).join("")}
      </div>
      <button class="word-delete px-2 py-1 text-xs text-red-600 hover:text-red-800 dark:text-red-400" title="Delete word">&times;</button>
    </div>`}function Ko(r){return r.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Qo(r){const n=je.map(u=>`<option value="${u.value}" ${r.device===u.value?"selected":""}>${u.label}</option>`).join("");if(r.isTextDevice)return`
        <div class="device-block border border-gray-300 dark:border-gray-600 rounded p-3 space-y-2" data-block-id="${r.id}">
          <div class="flex items-center gap-2">
            <label class="text-xs font-bold">Device:</label>
            <select class="block-device flex-1 px-2 py-1 text-xs border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700">
              ${n}
            </select>
            <button class="block-delete px-2 py-1 text-xs bg-red-600 hover:bg-red-700 text-white rounded">Delete</button>
          </div>
          <div class="flex items-center gap-2">
            <label class="text-xs font-bold">Offset:</label>
            <input type="number" min="0" value="${r.offset}" class="block-offset w-20 px-2 py-1 text-xs font-mono border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700">
            <span class="text-xs text-gray-500">(each line = 1 record)</span>
          </div>
          <textarea class="block-text w-full h-24 px-2 py-1 text-xs font-mono border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 whitespace-pre" placeholder="Enter text">${Ko(r.textValue)}</textarea>
        </div>`;{const u=r.words.map((s,c)=>Zo(r.id,c,s)).join("");return`
        <div class="device-block border border-gray-300 dark:border-gray-600 rounded p-3 space-y-2" data-block-id="${r.id}">
          <div class="flex items-center gap-2">
            <label class="text-xs font-bold">Device:</label>
            <select class="block-device flex-1 px-2 py-1 text-xs border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700">
              ${n}
            </select>
            <button class="block-delete px-2 py-1 text-xs bg-red-600 hover:bg-red-700 text-white rounded">Delete</button>
          </div>
          <div class="flex items-center gap-2">
            <label class="text-xs font-bold">Offset:</label>
            <input type="number" min="0" value="${r.offset}" class="block-offset w-20 px-2 py-1 text-xs font-mono border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700">
            <div class="flex-1"></div>
            <button class="word-add px-2 py-1 text-xs bg-green-600 hover:bg-green-700 text-white rounded">+ Word</button>
          </div>
          <div class="words-container space-y-1">${u}</div>
        </div>`}}function es(r){const n=je.map(u=>`<option value="${u.value}" ${r.device===u.value?"selected":""}>${u.label}</option>`).join("");return`
    <div class="output-block border border-gray-300 dark:border-gray-600 rounded p-3" data-block-id="${r.id}">
      <div class="flex items-center gap-2 flex-wrap">
        <label class="text-xs font-bold">Device:</label>
        <select class="output-device px-1 py-1 text-xs border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700">
          ${n}
        </select>
        <label class="text-xs font-bold">Offset:</label>
        <input type="number" min="0" value="${r.offset}" class="output-offset w-14 px-1 py-1 text-xs font-mono border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700">
        <label class="text-xs font-bold">Length:</label>
        <input type="number" min="1" value="${r.length}" class="output-length w-14 px-1 py-1 text-xs font-mono border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700">
        <label class="text-xs font-bold">Type:</label>
        <select class="output-type px-1 py-1 text-xs border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700">
          <option value="int" ${r.type==="int"?"selected":""}>Int</option>
          <option value="float" ${r.type==="float"?"selected":""}>Float</option>
          <option value="text" ${r.type==="text"?"selected":""}>Text</option>
          <option value="bytes" ${r.type==="bytes"?"selected":""}>Bytes</option>
        </select>
        <button class="output-delete px-2 py-1 text-xs text-red-600 hover:text-red-800 dark:text-red-400">&times;</button>
      </div>
    </div>`}function rt(){const r=document.getElementById("device-blocks-container");r.innerHTML=Oe.map(Qo).join(""),rs()}function br(){const r=document.getElementById("device-outputs-container");r.innerHTML=He.map(es).join(""),ns()}function ts(r,n){const u=`${r}-w${n}`,c=document.getElementById(`${u}-type`).value,p={type:c,intValue:"",sign:"+",bytes:["0","0","0","0","0"],addr:"0",mergedBytes:["0","0","0"]};if(c==="int")p.intValue=document.getElementById(`${u}-value`).value;else if(c==="text")p.intValue=document.getElementById(`${u}-text`).value;else if(c==="bytes"){p.sign=document.getElementById(`${u}-sign`).value;for(let g=0;g<5;g++)p.bytes[g]=document.getElementById(`${u}-b${g+1}`).value}else if(c==="merged-bytes"){p.sign=document.getElementById(`${u}-sign-m`).value,p.addr=document.getElementById(`${u}-addr`).value;for(let g=0;g<3;g++)p.mergedBytes[g]=document.getElementById(`${u}-b${g+3}m`).value}return p}function gt(){for(const r of Oe){const n=document.querySelector(`[data-block-id="${r.id}"]`);if(!n)continue;const u=n.querySelector(".block-device").value,s=Mt(u);if(r.device=u,r.offset=n.querySelector(".block-offset").value,r.isTextDevice)r.textValue=n.querySelector(".block-text")?.value??"";else{const c=n.querySelectorAll("[data-word-index]");r.words=Array.from(c).map((p,g)=>ts(r.id,g))}r.isTextDevice!==s&&(r.isTextDevice=s,s?(r.textValue="",r.words=[]):(r.textValue="",r.words=[nt()]))}}function Rn(){for(const r of He){const n=document.querySelector(`.output-block[data-block-id="${r.id}"]`);n&&(r.device=n.querySelector(".output-device").value,r.offset=n.querySelector(".output-offset").value,r.length=n.querySelector(".output-length").value,r.type=n.querySelector(".output-type").value)}}function rs(){document.querySelectorAll("#device-blocks-container .device-block").forEach(r=>{const n=r.getAttribute("data-block-id"),u=Oe.find(s=>s.id===n);u&&(r.querySelector(".block-delete")?.addEventListener("click",()=>{Oe=Oe.filter(s=>s.id!==n),rt()}),r.querySelector(".block-device")?.addEventListener("change",s=>{const c=u.isTextDevice;gt();const p=s.target.value,g=Mt(p);c!==g&&rt()}),u.isTextDevice||(r.querySelector(".word-add")?.addEventListener("click",()=>{gt(),u.words.push(nt()),rt()}),r.querySelectorAll(".word-delete").forEach((s,c)=>{s.addEventListener("click",()=>{u.words.length>1&&(gt(),u.words.splice(c,1),rt())})}),r.querySelectorAll("[data-word-index]").forEach((s,c)=>{const p=`${n}-w${c}`,g=document.getElementById(`${p}-type`);g?.addEventListener("change",()=>{const m=g.value;document.getElementById(`${p}-input-int`)?.classList.toggle("hidden",m!=="int"),document.getElementById(`${p}-input-text`)?.classList.toggle("hidden",m!=="text"),document.getElementById(`${p}-input-bytes`)?.classList.toggle("hidden",m!=="bytes"),document.getElementById(`${p}-input-merged`)?.classList.toggle("hidden",m!=="merged-bytes")})})))})}function ns(){document.querySelectorAll("#device-outputs-container .output-block").forEach(r=>{const n=r.getAttribute("data-block-id");r.querySelector(".output-delete")?.addEventListener("click",()=>{He=He.filter(u=>u.id!==n),br()})})}function us(r){return r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/ /g,"&nbsp;")}function ar(r,n){return n==="text"&&typeof r=="string"?us(r):String(r)}function Mn(){const r=document.getElementById("device-results-container");try{const n=qe.parse(Ln.value)||{};let u="";for(const s of je){const c=s.value;if(!(c in n))continue;let p=n[c];Array.isArray(p)||(p=[p]);for(const g of p){const m=g.offset??0,F=g.type??"int";u+=`<div class="border border-gray-300 dark:border-gray-600 rounded p-2 mb-2">
                    <div class="text-xs font-bold mb-1">${s.label} | Offset: ${m} | Type: ${F}</div>
                    <div class="font-mono text-xs break-all">`,"value"in g?u+=`<span class="bg-gray-100 dark:bg-gray-700 px-1 rounded">${ar(g.value,F)}</span>`:"values"in g&&(Array.isArray(g.values)?u+=g.values.map((v,A)=>`<span class="bg-gray-100 dark:bg-gray-700 px-1 rounded mr-1 mb-1 inline-block">[${m+A}] ${ar(v,F)}</span>`).join(""):u+=`<span class="bg-gray-100 dark:bg-gray-700 px-1 rounded">${ar(g.values,F)}</span>`),u+="</div></div>"}}u===""?r.innerHTML='<p class="text-gray-500 text-sm">No device output</p>':r.innerHTML=u}catch{r.innerHTML='<p class="text-gray-500 text-sm">No results</p>'}}function is(){Oe=Go(),He=Jo(),rt(),br(),Mn()}function os(){gt(),Rn(),Yo()}function ss(){const r=document.getElementById("panel-devices");document.getElementById("add-device-block")?.addEventListener("click",()=>{gt(),Oe.push({id:Ot(),device:"card-reader",offset:"0",isTextDevice:!0,textValue:"",words:[]}),rt()}),document.getElementById("add-device-output")?.addEventListener("click",()=>{Rn(),He.push({id:Ot(),device:"card-reader",offset:"0",length:"1",type:"text"}),br()}),Ln.addEventListener("input",()=>{r.classList.contains("hidden")||Mn()})}const mr=document.querySelector("#io-spec-editor"),Nn=document.querySelector("#results-editor");let be=[],Re=[],as=0;function Lt(){return`mem-${++as}`}function ut(){return{type:"int",intValue:"0",sign:"+",bytes:["0","0","0","0","0"],addr:"0",mergedBytes:["0","0","0"]}}function Er(){try{return qe.parse(mr.value)||{}}catch{return{}}}function cs(r){const n=ut();return typeof r=="number"?(n.type="int",n.intValue=String(r)):typeof r=="string"?(n.type="text",n.intValue=r):Array.isArray(r)&&(r.length===6?(n.type="bytes",n.sign=r[0]==="-"?"-":"+",n.bytes=r.slice(1).map(String)):r.length===5&&(n.type="merged-bytes",n.sign=r[0]==="-"?"-":"+",n.addr=String(r[1]),n.mergedBytes=r.slice(2).map(String))),n}function ls(){const r=Er(),n=[];if("memory"in r){let u=r.memory;Array.isArray(u)||(u=[u]);for(const s of u){const c={id:Lt(),offset:String(s.offset??0),words:[]},p=s.values;if(Array.isArray(p))if(typeof p[0]=="string"&&p[0].length<=5&&p.every(g=>typeof g=="string"))for(const g of p){const m=ut();m.type="text",m.intValue=g,c.words.push(m)}else for(const g of p)c.words.push(cs(g));else if(typeof p=="string")for(let g=0;g<p.length;g+=5){const m=ut();m.type="text",m.intValue=p.substring(g,g+5),c.words.push(m)}c.words.length===0&&c.words.push(ut()),n.push(c)}}return n}function ds(){const r=Er(),n=[];if("outputs"in r&&r.outputs&&typeof r.outputs=="object"){const u=r.outputs;if("memory"in u){let s=u.memory;Array.isArray(s)||(s=[s]);for(const c of s)n.push({id:Lt(),offset:String(c.offset??0),length:String(c.length??1),type:c.type??"int"})}}return n}function fs(r){if(r.type==="int"){const n=parseInt(r.intValue,10);return isNaN(n)?0:n}if(r.type==="text")return r.intValue;if(r.type==="bytes")return[r.sign,...r.bytes.map(n=>{const u=parseInt(n,10);return isNaN(u)?0:u})];if(r.type==="merged-bytes"){const n=parseInt(r.addr,10);return[r.sign,isNaN(n)?0:n,...r.mergedBytes.map(u=>{const s=parseInt(u,10);return isNaN(s)?0:s})]}return 0}function ps(){const r=Er();if(be.length===0)delete r.memory;else{const n=be.map(u=>{const s=parseInt(u.offset,10)||0,c=u.words.map(fs);return{offset:s,values:c}});r.memory=n.length===1?n[0]:n}if(Re.length===0)r.outputs&&typeof r.outputs=="object"&&(delete r.outputs.memory,Object.keys(r.outputs).length===0&&delete r.outputs);else{r.outputs||(r.outputs={});const n=Re.map(u=>({offset:parseInt(u.offset,10)||0,length:parseInt(u.length,10)||1,type:u.type}));r.outputs.memory=n.length===1?n[0]:n}mr.value=JSON.stringify(r,null,2),mr.dispatchEvent(new Event("input",{bubbles:!0}))}function Ds(r,n,u){const s=`${r}-w${n}`;return`
    <div class="flex items-center gap-1 p-2 bg-gray-50 dark:bg-gray-800 rounded" data-word-index="${n}">
      <select id="${s}-type" class="w-24 px-1 py-1 text-xs border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700">
        <option value="int" ${u.type==="int"?"selected":""}>Integer</option>
        <option value="text" ${u.type==="text"?"selected":""}>Text</option>
        <option value="bytes" ${u.type==="bytes"?"selected":""}>Bytes</option>
        <option value="merged-bytes" ${u.type==="merged-bytes"?"selected":""}>Addr&Bytes</option>
      </select>
      <div id="${s}-input-int" class="flex-1 flex gap-1 ${u.type==="int"?"":"hidden"}">
        <input id="${s}-value" type="number" min="-1073741823" max="1073741823" value="${u.intValue}" class="flex-1 px-1 py-1 text-xs font-mono border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700">
      </div>
      <div id="${s}-input-text" class="flex-1 flex gap-1 ${u.type==="text"?"":"hidden"}">
        <input id="${s}-text" type="text" maxlength="5" value="${u.type==="text"?u.intValue:""}" placeholder="ABCDE" class="flex-1 px-1 py-1 text-xs font-mono border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700">
      </div>
      <div id="${s}-input-bytes" class="flex-1 flex gap-1 ${u.type==="bytes"?"":"hidden"}">
        <select id="${s}-sign" class="w-10 px-1 py-1 text-xs font-mono border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700">
          <option value="+" ${u.sign==="+"?"selected":""}>+</option>
          <option value="-" ${u.sign==="-"?"selected":""}>-</option>
        </select>
        ${[0,1,2,3,4].map(c=>`<input id="${s}-b${c+1}" type="number" min="0" max="63" value="${u.bytes[c]}" class="w-10 px-1 py-1 text-xs font-mono border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-center">`).join("")}
      </div>
      <div id="${s}-input-merged" class="flex-1 flex gap-1 ${u.type==="merged-bytes"?"":"hidden"}">
        <select id="${s}-sign-m" class="w-10 px-1 py-1 text-xs font-mono border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700">
          <option value="+" ${u.sign==="+"?"selected":""}>+</option>
          <option value="-" ${u.sign==="-"?"selected":""}>-</option>
        </select>
        <input id="${s}-addr" type="number" min="0" max="4095" value="${u.addr}" class="w-14 px-1 py-1 text-xs font-mono border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-center">
        ${[0,1,2].map(c=>`<input id="${s}-b${c+3}m" type="number" min="0" max="63" value="${u.mergedBytes[c]}" class="w-10 px-1 py-1 text-xs font-mono border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-center">`).join("")}
      </div>
      <button class="word-delete px-2 py-1 text-xs text-red-600 hover:text-red-800 dark:text-red-400" title="Delete word">&times;</button>
    </div>`}function gs(r){const n=r.words.map((u,s)=>Ds(r.id,s,u)).join("");return`
    <div class="memory-block border border-gray-300 dark:border-gray-600 rounded p-3 space-y-2" data-block-id="${r.id}">
      <div class="flex items-center gap-2">
        <label class="text-xs font-bold">Offset:</label>
        <input type="number" min="0" max="3999" value="${r.offset}" class="block-offset w-20 px-2 py-1 text-xs font-mono border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700">
        <div class="flex-1"></div>
        <button class="word-add px-2 py-1 text-xs bg-green-600 hover:bg-green-700 text-white rounded">+ Word</button>
        <button class="block-delete px-2 py-1 text-xs bg-red-600 hover:bg-red-700 text-white rounded">Delete Block</button>
      </div>
      <div class="words-container space-y-1">${n}</div>
    </div>`}function ys(r){return`
    <div class="output-block border border-gray-300 dark:border-gray-600 rounded p-3" data-block-id="${r.id}">
      <div class="flex items-center gap-2 flex-wrap">
        <label class="text-xs font-bold">Offset:</label>
        <input type="number" min="0" max="3999" value="${r.offset}" class="output-offset w-16 px-1 py-1 text-xs font-mono border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700">
        <label class="text-xs font-bold">Length:</label>
        <input type="number" min="1" max="4000" value="${r.length}" class="output-length w-16 px-1 py-1 text-xs font-mono border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700">
        <label class="text-xs font-bold">Type:</label>
        <select class="output-type px-1 py-1 text-xs border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700">
          <option value="int" ${r.type==="int"?"selected":""}>Int</option>
          <option value="float" ${r.type==="float"?"selected":""}>Float</option>
          <option value="text" ${r.type==="text"?"selected":""}>Text</option>
          <option value="bytes" ${r.type==="bytes"?"selected":""}>Bytes</option>
        </select>
        <button class="output-delete px-2 py-1 text-xs text-red-600 hover:text-red-800 dark:text-red-400">&times;</button>
      </div>
    </div>`}function yt(){const r=document.getElementById("memory-blocks-container");r.innerHTML=be.map(gs).join(""),hs()}function hr(){const r=document.getElementById("memory-outputs-container");r.innerHTML=Re.map(ys).join(""),vs()}function ms(r,n){const u=`${r}-w${n}`,c=document.getElementById(`${u}-type`).value,p={type:c,intValue:"",sign:"+",bytes:["0","0","0","0","0"],addr:"0",mergedBytes:["0","0","0"]};if(c==="int")p.intValue=document.getElementById(`${u}-value`).value;else if(c==="text")p.intValue=document.getElementById(`${u}-text`).value;else if(c==="bytes"){p.sign=document.getElementById(`${u}-sign`).value;for(let g=0;g<5;g++)p.bytes[g]=document.getElementById(`${u}-b${g+1}`).value}else if(c==="merged-bytes"){p.sign=document.getElementById(`${u}-sign-m`).value,p.addr=document.getElementById(`${u}-addr`).value;for(let g=0;g<3;g++)p.mergedBytes[g]=document.getElementById(`${u}-b${g+3}m`).value}return p}function Rt(){for(const r of be){const n=document.querySelector(`[data-block-id="${r.id}"]`);if(!n)continue;r.offset=n.querySelector(".block-offset").value;const u=n.querySelectorAll("[data-word-index]");r.words=Array.from(u).map((s,c)=>ms(r.id,c))}}function mn(){for(const r of Re){const n=document.querySelector(`.output-block[data-block-id="${r.id}"]`);n&&(r.offset=n.querySelector(".output-offset").value,r.length=n.querySelector(".output-length").value,r.type=n.querySelector(".output-type").value)}}function hs(){document.querySelectorAll(".memory-block").forEach(r=>{const n=r.getAttribute("data-block-id");r.querySelector(".block-delete")?.addEventListener("click",()=>{be=be.filter(u=>u.id!==n),yt()}),r.querySelector(".word-add")?.addEventListener("click",()=>{const u=be.find(s=>s.id===n);u&&(Rt(),u.words.push(ut()),yt())}),r.querySelectorAll(".word-delete").forEach((u,s)=>{u.addEventListener("click",()=>{const c=be.find(p=>p.id===n);c&&c.words.length>1&&(Rt(),c.words.splice(s,1),yt())})}),r.querySelectorAll("[data-word-index]").forEach((u,s)=>{const c=`${n}-w${s}`,p=document.getElementById(`${c}-type`);p?.addEventListener("change",()=>{const g=p.value;document.getElementById(`${c}-input-int`)?.classList.toggle("hidden",g!=="int"),document.getElementById(`${c}-input-text`)?.classList.toggle("hidden",g!=="text"),document.getElementById(`${c}-input-bytes`)?.classList.toggle("hidden",g!=="bytes"),document.getElementById(`${c}-input-merged`)?.classList.toggle("hidden",g!=="merged-bytes")})})})}function vs(){document.querySelectorAll(".output-block").forEach(r=>{const n=r.getAttribute("data-block-id");r.querySelector(".output-delete")?.addEventListener("click",()=>{Re=Re.filter(u=>u.id!==n),hr()})})}function Fs(r){return r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/ /g,"&nbsp;")}function cr(r,n){return n==="text"&&typeof r=="string"?Fs(r):String(r)}function hn(){const r=document.getElementById("memory-results-container");try{const n=qe.parse(Nn.value)||{};if(!("memory"in n)){r.innerHTML='<p class="text-gray-500 text-sm">No memory output</p>';return}let u=n.memory;Array.isArray(u)||(u=[u]);let s="";for(const c of u){const p=c.offset??0,g=c.type??"int";s+=`<div class="border border-gray-300 dark:border-gray-600 rounded p-2 mb-2">
                <div class="text-xs font-bold mb-1">Offset: ${p} | Type: ${g}</div>
                <div class="font-mono text-xs break-all">`,"value"in c?s+=`<span class="bg-gray-100 dark:bg-gray-700 px-1 rounded">${cr(c.value,g)}</span>`:"values"in c&&(Array.isArray(c.values)?s+=c.values.map((m,F)=>`<span class="bg-gray-100 dark:bg-gray-700 px-1 rounded mr-1 mb-1 inline-block">[${p+F}] ${cr(m,g)}</span>`).join(""):s+=`<span class="bg-gray-100 dark:bg-gray-700 px-1 rounded">${cr(c.values,g)}</span>`),s+="</div></div>"}r.innerHTML=s}catch{r.innerHTML='<p class="text-gray-500 text-sm">No results</p>'}}function bs(){const r=document.getElementById("tab-codes"),n=document.getElementById("tab-registers"),u=document.getElementById("tab-memory"),s=document.getElementById("tab-devices"),c=document.getElementById("panel-codes"),p=document.getElementById("panel-registers"),g=document.getElementById("panel-memory"),m=document.getElementById("panel-devices");function F($){const L=!p.classList.contains("hidden"),N=!g.classList.contains("hidden"),se=!m.classList.contains("hidden");L&&$!=="registers"&&Vo(),N&&$!=="memory"&&A(),se&&$!=="devices"&&os(),[r,n,u,s].forEach(x=>{x.classList.remove("border-blue-500","text-blue-600","dark:text-blue-400"),x.classList.add("border-transparent","text-gray-500","dark:text-gray-400")}),[c,p,g,m].forEach(x=>x.classList.add("hidden")),$==="codes"?(r.classList.add("border-blue-500","text-blue-600","dark:text-blue-400"),r.classList.remove("border-transparent","text-gray-500","dark:text-gray-400"),c.classList.remove("hidden")):$==="registers"?(n.classList.add("border-blue-500","text-blue-600","dark:text-blue-400"),n.classList.remove("border-transparent","text-gray-500","dark:text-gray-400"),p.classList.remove("hidden"),Wo()):$==="memory"?(u.classList.add("border-blue-500","text-blue-600","dark:text-blue-400"),u.classList.remove("border-transparent","text-gray-500","dark:text-gray-400"),g.classList.remove("hidden"),v(),hn()):$==="devices"&&(s.classList.add("border-blue-500","text-blue-600","dark:text-blue-400"),s.classList.remove("border-transparent","text-gray-500","dark:text-gray-400"),m.classList.remove("hidden"),is())}function v(){be=ls(),Re=ds(),be.length===0&&(be=[]),yt(),hr()}function A(){Rt(),mn(),ps()}r.addEventListener("click",()=>F("codes")),n.addEventListener("click",()=>F("registers")),u.addEventListener("click",()=>F("memory")),s.addEventListener("click",()=>F("devices")),document.getElementById("add-memory-block")?.addEventListener("click",()=>{Rt(),be.push({id:Lt(),offset:"0",words:[ut()]}),yt()}),document.getElementById("add-output-block")?.addEventListener("click",()=>{mn(),Re.push({id:Lt(),offset:"0",length:"1",type:"int"}),hr()}),Nn.addEventListener("input",()=>{g.classList.contains("hidden")||hn()})}const Es=document.querySelector("#mixal-editor"),Cs=document.querySelector("#io-spec-editor"),kt=document.querySelector("#results-editor"),As=document.querySelector("#button-execute");fo();jo();bs();ss();As.addEventListener("click",()=>{Do();try{const r=qe.parse(Cs.value);let n=uo(Es.value,r);kt.value=JSON.stringify(n,null,2)}catch(r){r instanceof Error?kt.value=r.message:kt.value=""+r}kt.dispatchEvent(new Event("input",{bubbles:!0}))});
